!function(t){function e(e){for(var r,a,s=e[0],c=e[1],u=e[2],h=0,d=[];h<s.length;h++)a=s[h],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&d.push(i[a][0]),i[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);for(l&&l(e);d.length;)d.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],r=!0,s=1;s<n.length;s++){var c=n[s];0!==i[c]&&(r=!1)}r&&(o.splice(e--,1),t=a(a.s=n[0]))}return t}var r={},i={5:0},o=[];function a(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=r,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var l=c;o.push([1605,0]),n()}({1:function(t,e,n){"use strict";var r=n(30),i=n.n(r),o=(n(236),n(323),n(324),n(325),n(150)),a=n.n(o),s=n(4);i.a.Topic=function(){var t={},e={},n=s.a.topics||i.a.noop;function r(r){return e.hasOwnProperty(r)||function(r){var o=i.a.Callbacks("memory unique");n("new %c%s","font-weight: bold",r),o.add(function(e){t[r]=e,n("update %c%s %c%o","font-weight: bold",r,"color: black",e)}),e[r]={observe:function(t){return o.add(t),this},put:function(e,n){var i=t[r];return(i!=e||n)&&o.fire(e,i),this},assign:function(e){var n=t[r];return o.fire(a()(n,e),n),this},apply:function(e){var n=t[r];o.fire(e(n),n)},unobserve:function(t){return o.remove(t),this},get:function(){return t[r]},getPromise:function(){return new Promise(function(t){o.add(function e(n,r){t(n,r),o.remove(e)})})},discard:function(){e[r]=t[r]=void 0}}}(r),e[r]}return r.dump=function(){return t},r};e.a=i.a},100:function(t,e,n){"use strict";var r="topic/SET";n.d(e,"a",function(){return o}),n.d(e,"c",function(){return a}),n.d(e,"d",function(){return s}),n.d(e,"b",function(){return c});var i=r.length+1;function o(t){return"".concat(r,"/").concat(t)}function a(t){return t.slice(i)}function s(t){return"".concat(t," (old)")}function c(t){return t.startsWith(r)}},101:function(t,e,n){"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function i(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function o(t){return o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},o(t)}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}function s(t,e){return s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},s(t,e)}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),t}n.d(e,"b",function(){return f}),n.d(e,"a",function(){return m}),n.d(e,"c",function(){return b});var d=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;u(this,t),this.symbol=e,this.topic=n.put(e),this.fails=r}return h(t,[{key:"connected",value:function(){return this}},{key:"disconnected",value:function(){return this}},{key:"ok",value:function(){return this}},{key:"fail",value:function(){return this}},{key:"state",get:function(){return this.symbol}}]),t}(),f=Symbol("Online"),p=function(t){function e(){var t,n;u(this,e);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=i(this,(t=o(e)).call.apply(t,[this,e.symbol].concat(a))),n.fails=0,n}return a(e,t),h(e,[{key:"ok",value:function(){return this.fails=0,this}},{key:"fail",value:function(t){return this.fails+=1,this.fails>t?this.disconnected():this}},{key:"disconnected",value:function(){return new v(this.topic,this.fails)}}]),e}(d);c(p,"symbol",f);var m=Symbol("Offline"),v=function(t){function e(){var t;u(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return i(this,(t=o(e)).call.apply(t,[this,e.symbol].concat(r)))}return a(e,t),h(e,[{key:"ok",value:function(){return this.connected()}},{key:"connected",value:function(){return new p(this.topic)}}]),e}(d);c(v,"symbol",m);var b=function(){function t(e){var n=this,r=e.fails,i=void 0===r?3:r,o=e.heartbeat,a=void 0===o?Function.prototype:o,s=e.interval,c=void 0===s?1e4:s,l=e.topic;u(this,t);var h=function(){n.connState=n.connState.ok()},d=function(){n.connState=n.connState.fail(i)};this.connState=new p(l),this.heartbeat=function(){setTimeout(function(){a().then(h,d),n.heartbeat()},c)}}return h(t,[{key:"state",get:function(){return this.connState.state}}]),t}()},11:function(t,e,n){"use strict";var r=n(30),i=n.n(r),o=(n(282),n(10)),a=n.n(o),s=n(6),c=n.n(s),u=n(56),l=n.n(u);function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var p=Number.MAX_SAFE_INTEGER,m=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;d(this,t),f(this,"key",void 0),f(this,"value",void 0),f(this,"parent",void 0),f(this,"subs",void 0),this.key=e,this.value=n,this.parent=null,this.subs=[]},v=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];d(this,t),f(this,"nelem",void 0),f(this,"root",void 0),Object.defineProperties(this,{nelem:{writable:!0,enumerable:!1,value:0}}),this.root=new m;for(var n=0;n<e.length;n+=1){var r=e[n],i=r.key,o=r.value;this.push(i,o)}}var e,n,r;return e=t,n=[{key:"push",value:function(e,n){var r=new m(e,n);return this.root=t.meld(this.root,r),this.nelem+=1,r}},{key:"pop",value:function(){var e=this.root,n=e.subs,r=e.value;return this.root=t.pair(n),this.nelem-=1,r}},{key:"decreaseKey",value:function(e,n){if(n.key-=e,n.parent){var r=n.parent,i=r.subs,o=i.indexOf(n);o>0&&(i.splice(o,1),t.meld(this.root,n))}}},{key:"remove",value:function(t){this.decreaseKey(1/0,t),this.pop()}},{key:"length",get:function(){return this.nelem}}],r=[{key:"meld",value:function(t,e){return t.key?e.key?(t.key<e.key?(n=t,r=e):(n=e,r=t),r.parent=n,n.subs.splice(0,0,r),n):t:e;var n,r}},{key:"pair",value:function(e){return e.length?e.reduce(t.meld):new m}}],n&&h(e.prototype,n),r&&h(e,r),t}(),b=n(73);function y(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function g(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function O(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var w=5,k=10,S=100,j=1e3,_=Symbol("queued"),C=Symbol("running"),E={jqXhr:{status:0},error:"Aborted while requesting"},P={jqXhr:{status:0},error:"Aborted while waiting"},x=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),O(this,"count",0),O(this,"limit",0),O(this,"queue",new v),O(this,"pending",!1),O(this,"next",function(){if(n.pending=!0,0===n.queue.length||n.count>=n.limit)n.pending=!1;else{n.busy();var t=n.queue.pop(),e=t.fn,r=t.args,i=t.resolve,o=t.reject,a=e.apply(void 0,y(r));t.setAbort(function(){return a.abort()}),t.state=C,a.then(i,o).then(n.done,n.done).then(n.tick,n.tick),n.tick()}}),O(this,"tick",function(){return setTimeout(n.next,0)}),O(this,"busy",function(){n.count+=1}),O(this,"done",function(){n.count-=1}),this.limit=e}var e,n,r;return e=t,n=[{key:"push",value:function(t,e){for(var n=this,r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];return new b.a(function(r,o,a){var s={args:i,abort:Function.prototype,fn:e,instance:null,resolve:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r({data:t,status:n.status,jqXhr:n})},reject:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=(arguments.length>1&&arguments[1],arguments.length>2?arguments[2]:void 0);return o({error:e,status:t.status,jqXhr:t})},setAbort:function(t){s.abort=t.bind(null,E)},state:_},c=n.queue.push(t,s);a(function(){c.value.state===C?c.value.abort(E):(c.value.reject(P),n.queue.remove(c))}),n.pending||n.tick()})}}],n&&g(e.prototype,n),r&&g(e,r),t}(),T=n(39),A=n(5),I=n(13);function L(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function D(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function M(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}n.d(e,"s",function(){return U}),n.d(e,"G",function(){return Y}),n.d(e,"r",function(){return q}),n.d(e,"n",function(){return W}),n.d(e,"q",function(){return G}),n.d(e,"U",function(){return X}),n.d(e,"f",function(){return K}),n.d(e,"e",function(){return Z}),n.d(e,"g",function(){return J}),n.d(e,"w",function(){return Q}),n.d(e,"u",function(){return tt}),n.d(e,"v",function(){return et}),n.d(e,"i",function(){return nt}),n.d(e,"b",function(){return rt}),n.d(e,"B",function(){return it}),n.d(e,"l",function(){return ot}),n.d(e,"j",function(){return at}),n.d(e,"k",function(){return st}),n.d(e,"K",function(){return ct}),n.d(e,"p",function(){return ut}),n.d(e,"A",function(){return lt}),n.d(e,"T",function(){return ht}),n.d(e,"W",function(){return dt}),n.d(e,"S",function(){return ft}),n.d(e,"o",function(){return pt}),n.d(e,"z",function(){return mt}),n.d(e,"F",function(){return vt}),n.d(e,"O",function(){return bt}),n.d(e,"Q",function(){return yt}),n.d(e,"J",function(){return gt}),n.d(e,"a",function(){return Ot}),n.d(e,"N",function(){return wt}),n.d(e,"y",function(){return kt}),n.d(e,"M",function(){return St}),n.d(e,"P",function(){return jt}),n.d(e,"C",function(){return _t}),n.d(e,"d",function(){return Ct}),n.d(e,"x",function(){return Et}),n.d(e,"V",function(){return Pt}),n.d(e,"L",function(){return xt}),n.d(e,"t",function(){return Tt}),n.d(e,"E",function(){return At}),n.d(e,"D",function(){return It}),n.d(e,"H",function(){return Lt}),n.d(e,"R",function(){return Dt}),n.d(e,"c",function(){return Mt}),n.d(e,"h",function(){return $t}),n.d(e,"I",function(){return Rt}),n.d(e,"m",function(){return Ft});var R=l()(/^hosts\//,""),F="VIEW_MODE_FULL",N={getHostVer:a()("product/version"),getLangs:a()("languages"),getUUID:a()("uuid"),getHost:a()("hosts/${hostname}"),getCams:a()("video-origins/${hostname}"),getCam:a()("video-origins/${vsid}"),getSources:a()("video-sources/${ref}"),getBookmarks:a()("archive/contents/bookmarks/${host}/${endtime}/${begintime}?"),toggleProtectedBookmark:a()("archive/contents/bookmarks"),deleteRecord:a()("archive/contents/bookmarks?"),deleteBookmark:a()("archive/contents/bookmarks"),editBookmark:a()("archive/contents/bookmarks"),findCams:a()("camera/list"),getVideoJar:a()("jar/cambozola.jar"),getLive:a()("live/media/${vsid}?"),close:a()("live/media/${vsid}"),getSnapshot:a()("live/media/snapshot/${vsid}?"),getArchiveList:a()("archive/list/${vsid}"),getArchive:a()("archive/media/${vsid}/${begintime}?"),stopArchive:a()("archive/media/stop/${uuid}"),getArchiveContent:a()("archive/contents/intervals/${vsid}/${endtime}/${begintime}"),getArchiveFrames:a()("archive/contents/frames/${vsid}/${endtime}/${begintime}"),postExport:a()("export/${mode}/${vsid}/${begintime}/${endtime}?"),getExport:a()("${location}/status"),stopExport:a()("${location}"),urlExport:a()("${location}/file?name=${file}"),getEvents:a()("archive/events/${source}/${vsid}/${endtime}/${begintime}?limit_to_archive=1&archive=${archive}"),getTelemetry:a()("control/telemetry/list/${objid}"),getPtzSession:a()("control/telemetry/session/acquire/${tcid}"),releasePtzSession:a()("control/telemetry/session/release/${tcid}"),keepPtzSession:a()("control/telemetry/session/keepalive/${tcid}"),getDegrees:a()("control/telemetry/info/${tcid}"),setMove:a()("control/telemetry/move/${tcid}"),setZoom:a()("control/telemetry/zoom/${tcid}"),setFocus:a()("control/telemetry/focus/${tcid}"),setIris:a()("control/telemetry/iris/${tcid}"),pointMove:a()("control/telemetry/move/point/${tcid}"),areaZoom:a()("control/telemetry/zoom/area/${tcid}"),setAuto:a()("control/telemetry/auto/${tcid}"),getPresets:a()("control/telemetry/preset/info/${tcid}"),goPreset:a()("control/telemetry/preset/go/${tcid}"),setPreset:a()("control/telemetry/preset/set/${tcid}"),removePreset:a()("control/telemetry/preset/remove/${tcid}"),getPosition:a()("control/telemetry/position/${tcid}"),getLayouts:a()("layouts"),statistics:a()("statistics/${obj}"),batchStatistics:a()("statistics"),sse:a()("eventchannel"),archsearch:a()("search/${type}/${begintime}/${endtime}"),facesearch:a()("search/${type}/${begintime}/${endtime}"),getSearchResults:a()("${location}/result?"),stopSearch:a()("${location}"),grpc:a()("grpc"),getAvailableGroups:a()("group"),getMaps:a()("v1/maps?"),getMapImage:a()("v1/maps/image?"),getMapMarkers:a()("v1/maps/markers?")},z=c()([I.c,i.a.param,decodeURIComponent]),B=250,V=new x(5);function H(t){var e=t.url,n=t.data,r=void 0===n?{}:n,o=t.type,a=void 0===o?"GET":o,s=t.dataType,c=t.contentType,u=t.priority,l=void 0===u?S:u,h=t.timeout,d=void 0===h?0:h,f="",p=e,m=T.b.authToken;return"POST"===a?(p=Object(T.a)(p),f=JSON.stringify(r)):f=z(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?D(n,!0).forEach(function(e){M(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},r,{authToken:m})),V.push(l,i.a.ajax,{url:p,type:a,data:f,dataType:s,contentType:c,timeout:d})}function U(){return H({url:N.getHostVer()})}function Y(){var t={url:N.getLangs(),priority:j};return H(t)}function q(t){var e={url:N.getHost({hostname:t})};return H(e)}function W(t){var e=t.host,n=t.begintime,r=t.endtime,i={url:N.getBookmarks({host:e,begintime:Object(A.k)(n),endtime:Object(A.j)(r)})};return H(i)}function G(t){var e=t.begintime,n=t.endtime,r=t.origin,i=t.accessPoint,o=t.maskSize,a={access_point:i,camera_ID:r,dt_posix_start_time:Object(A.k)(e),dt_posix_end_time:Object(A.j)(n),mask_size:o,result_type:"RESULT_TYPE_IMAGE"},s={type:"POST",contentType:"application/json",url:N.grpc(),data:{method:"axxonsoft.bl.heatmap.HeatMapService.BuildHeatmap",data:a,result_type:"RESULT_TYPE_IMAGE"}};return H(s)}function X(t){var e={type:"POST",contentType:"application/json",url:N.toggleProtectedBookmark(),data:t};return H(e)}function K(t){var e={type:"DELETE",contentType:"application/json",url:N.deleteRecord()+z.apply(void 0,L(t))};return H(e)}function Z(t){var e={type:"POST",contentType:"application/json",url:N.deleteBookmark(),data:t};return H(e)}function J(t){var e={type:"POST",contentType:"application/json",url:N.editBookmark(),data:t};return H(e)}function Q(){return H({url:N.getMaps()+z({view:F})})}function tt(t){var e=t.mapId;return H({url:N.getMapImage()+z({map_id:e})})}function et(t){var e=t.mapId;return H({url:N.getMapMarkers()+z({map_id:e})})}function nt(t){var e=t.filter,n=t.next,r=t.limit,i={url:N.findCams(),data:{filter:e,limit:r,next_page:n},priority:w};return H(i)}function rt(t){var e={type:"POST",contentType:"application/json",url:N.batchStatistics(),data:t};return H(e)}function it(){var t={dataType:"buffer",url:function(t,e){var n=t.w,r=t.h,i=t.vsid;return N.getSnapshot({vsid:R(i)})+z({w:n,h:r,_:e||Date.now(),authToken:T.b.authToken})}.apply(void 0,arguments),timeout:A.i};return H(t)}function ot(t){var e={url:N.getArchiveList({vsid:R(t)})};return H(e)}function at(t){var e=t.vsid,n=t.begintime,r=t.endtime,i=t.archive,o=t.offset,a=t.limit,s=void 0===a?B:a,c=t.scale,u=void 0===c?1:c,l={url:N.getArchiveContent({vsid:R(e),begintime:Object(A.k)(n),endtime:Object(A.j)(r)}),data:{archive:i,limit:s,offset:o,scale:u}};return H(l)}function st(t){var e=t.vsid,n=t.direction,r=t.timestamp,i=t.archive,o=t.limit,a=void 0===o?B:o,s=n>0?{endtime:"future",begintime:Object(A.k)(r)}:{endtime:"past",begintime:Object(A.j)(r)},c=s.begintime,u=s.endtime,l={url:N.getArchiveFrames({vsid:R(e),begintime:c,endtime:u}),dataType:"json",data:{archive:i,limit:a}};return H(l)}function ct(t){var e=t.vsid,n=t.isLive,r=t.extended,i=t.begintime,o=t.endtime,a=t.archive,s={type:"POST",data:r,contentType:"application/json",url:N.postExport({mode:n?"live":"archive",vsid:R(e),begintime:Object(A.k)(i),endtime:Object(A.j)(o)})+z({archive:a})};return H(s)}function ut(t){var e=t.location,n=t.archive,r={url:N.getExport({location:e}),data:{archive:n}};return H(r)}function lt(t){var e=t.location,n={url:N.getSearchResults({location:e})};return H(n)}function ht(t){var e=t.location,n={type:"DELETE",url:N.stopSearch({location:e})};return H(n)}function dt(t){var e=t.location,n=t.file;return c()([N.urlExport,T.a])({location:e,file:n})}function ft(t){var e=t.location,n={type:"DELETE",url:N.stopExport({location:e})};return H(n)}function pt(t){var e=t.source,n=void 0===e?"detectors":e,r=t.vsid,i=t.begintime,o=t.endtime,a=t.limit,s=void 0===a?B:a,c=t.offset,u=void 0===c?0:c,l=t.archive,h={url:N.getEvents({source:n,vsid:R(r),begintime:Object(A.k)(i),endtime:Object(A.j)(o),archive:l}),data:{limit:s,offset:u},priority:j};return H(h)}function mt(t){var e=t.session_priority,n=void 0===e?1:e,r=t.tcid,i={url:N.getPtzSession({tcid:R(r)}),data:{session_priority:n}};return H(i)}function vt(t){var e=t.session_id,n=t.tcid,r={type:"HEAD",url:N.keepPtzSession({tcid:R(n)}),data:{session_id:e}};return H(r)}function bt(t){var e=t.mode,n=t.pan,r=t.tilt,i=t.session_id,o=t.tcid,a={url:N.setMove({tcid:R(o)}),data:{mode:e,pan:n,tilt:r,session_id:i}};return H(a)}function yt(t){var e=t.mode,n=t.zoom,r=t.session_id,i=t.tcid,o={url:N.setZoom({tcid:R(i)}),data:{mode:e,value:n,session_id:r}};return H(o)}function gt(t){var e=t.x,n=t.y,r=t.session_id,i=t.tcid,o={url:N.pointMove({tcid:R(i)}),data:{x:e,y:n,session_id:r}};return H(o)}function Ot(t){var e=t.x,n=t.y,r=t.w,i=t.h,o=t.session_id,a=t.tcid,s={url:N.areaZoom({tcid:R(a)}),data:{x:e,y:n,w:r,h:i,session_id:o}};return H(s)}function wt(t){var e=t.degree,n=void 0===e?"focus":e,r=t.session_id,i=t.tcid,o={url:N.setAuto({tcid:R(i)}),data:{degree:n,session_id:r}};return H(o)}function kt(t){var e={url:N.getPresets({tcid:R(t)})};return H(e)}function St(t){var e=t.pos,n=t.session_id,r=t.tcid,i={url:N.removePreset({tcid:R(r)}),data:{pos:e,session_id:n}};return H(i)}function jt(t){var e=t.pos,n=t.label,r=t.session_id,i=t.tcid,o={url:N.setPreset({tcid:R(i)}),data:{pos:e,label:n,session_id:r}};return H(o)}function _t(t){var e=t.pos,n=t.session_id,r=t.tcid,i={url:N.goPreset({tcid:R(r)}),data:{pos:e,session_id:n}};return H(i)}function Ct(t){var e={type:"POST",contentType:"application/json",url:N.grpc(),data:{method:"axxonsoft.bl.layout.LayoutManager.Update",data:{created:t}}};return H(e)}function Et(t){var e={url:N.getPosition({tcid:R(t)})};return H(e)}function Pt(t){var e={type:"POST",contentType:"application/json",url:N.grpc(),data:{method:"axxonsoft.bl.layout.LayoutManager.Update",data:{modified:t}}};return H(e)}function xt(t){var e={type:"POST",contentType:"application/json",url:N.grpc(),data:{method:"axxonsoft.bl.layout.LayoutManager.Update",data:{removed:t}}};return H(e)}function Tt(){return H({url:N.getLayouts()})}function At(t){var e=t.type,n=t.begintime,r=t.endtime,i=t.query,o=void 0===i?{}:i,a={type:"POST",url:N.archsearch({type:e,begintime:Object(A.k)(n),endtime:Object(A.j)(r)}),data:Object(I.c)(o),contentType:"application/json"};return H(a)}function It(t){var e=t.type,n=t.begintime,r=t.endtime,i=t.query,o={type:"POST",url:N.facesearch({type:e,begintime:Object(A.k)(n),endtime:Object(A.j)(r)}),data:Object(I.c)(i),contentType:"application/json"};return H(o)}function Lt(){var t,e,n=!0,r="/statistics/webserver";document.execCommand("ClearAuthenticationCache"),(t=new XMLHttpRequest,e=i.a.Deferred(),t.addEventListener("loadend",e.resolve),t.open("GET",r,n,"\0","\0"),t.send(),e).then(function(){var t=new XMLHttpRequest,e=i.a.Deferred();return t.addEventListener("loadend",e.resolve),t.open("GET",r,n,"",""),t.send(),e}).then(function(){window.location.reload()})}document.cookie="Agent-Name=Agent",i.a.ajaxSetup({cache:!1}),i.a.ajaxTransport("buffer",function(t){var e=new XMLHttpRequest;return e.open("GET",t.url),e.responseType="arraybuffer",e.timeout=t.timeout,{send:function(t,n){Object.entries(t).map(function(t){var n=$(t,2),r=n[0],i=n[1];return e.setRequestHeader(r,i)}),e.onload=function(){return n(e.status,e.statusText,{buffer:e.response})},e.send()},abort:function(){e.abort()}}});var Dt=Object(T.a)("stats.html"),Mt=Object(T.a)("bookmarks.html"),$t=Object(T.a)("embedded.html");function Rt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A.i,e={url:N.getLangs(),type:"HEAD",timeout:t,priority:k};return H(e)}function Ft(){return H({url:N.getAvailableGroups()})}},115:function(t,e,n){"use strict";var r=n(72),i=n.n(r),o=n(6),a=n.n(o),s=n(3),c=n.n(s),u=n(21),l=n.n(u),h=n(157),d=n.n(h),f=n(70),p=n.n(f),m=n(56),v=n.n(m),b=n(43),y=n(120),g=n(13),O=n(4);function w(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function k(t){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k(t)}function S(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function j(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?S(n,!0).forEach(function(e){I(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function _(t,e){return!e||"object"!==k(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function C(t){return C=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},C(t)}function E(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&P(t,e)}function P(t,e){return P=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},P(t,e)}function x(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function T(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function A(t,e,n){return e&&T(t.prototype,e),n&&T(t,n),t}function I(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var L=v()(/^hosts\//,""),D=["speed","beginTime","endpoint","keyFrames","archive","format"],M=a()(i()([[a()(c()(["method"]),l()("play")),p()(["endpoint","format","method","streamId","keyFrames","speed","beginTime","archive","width","height","vc"])],[a()(c()(["method"]),l()("stop")),p()(["method","streamId"])],[a()(c()(["method"]),l()("batch")),p()(["endpoint","format","method","streamId","keyFrames","timestampList","archive","width","height","vc"])]]),Object(g.i)({endpoint:L,archive:L})),$=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;x(this,t),I(this,"ctx",void 0),I(this,"options",void 0),this.options=e,this.ctx=n,n.conn.postMessage(M(e)),O.a.video("media state: %c%s %c%s","font-weight: bold",this.state,"color:gray",this.options.endpoint)}return A(t,[{key:"batch",value:function(){return this}},{key:"play",value:function(){return this}},{key:"stop",value:function(){return this}},{key:"state",get:function(){return this.constructor.name}}]),t}(),R=function(t){function e(t,n){return x(this,e),n.updateIndex(t.streamId),_(this,C(e).call(this,t,n))}return E(e,t),A(e,[{key:"stop",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options,e=this.options.streamId,n=j({},t,{method:"stop",streamId:e});return this.ctx.clearIndex(e),new F(n,this.ctx)}},{key:"play",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options,e=p()(D,this.options),n=d()(e,t);if(n)return this;var r=j({},t,{keepPlayer:n});return O.a.video("media %crestart%c %s %c%s","font-weight: bold","font-weight: normal",r.keepPlayer?"(keeping player)":"","color: gray",r.endpoint),this.stop(r).play()}}]),e}($),F=function(t){function e(t,n){var r;return x(this,e),r=_(this,C(e).call(this,t,n)),n.clearIndex(t.streamId),r}return E(e,t),A(e,[{key:"play",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options,e=t.keepPlayer,n=w(t,["keepPlayer"]),r=n.format===b.a.MP4&&(n.archFastMjpeg?1===n.speed:0!==n.speed),i={},o="img";return r?(i=j({},n,{format:b.a.MP4}),o="mse"):i=j({},n,{format:"jpeg"}),e||this.ctx.setType(o),i.streamId=Object(y.a)(),i.method="play",new R(i,this.ctx)}},{key:"batch",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options,e=j({},t,{format:"jpeg",method:"batch",streamId:Object(y.a)()});return new R(e,this.ctx)}}]),e}($);e.a=function(t){var e={ctx:t,options:{},stop:function(){return this},play:null,batch:null};return e.play=F.prototype.play.bind(e),e.batch=F.prototype.batch.bind(e),e}},12:function(t,e,n){"use strict";n.d(e,"b",function(){return r});var r={APP_LOADED:"appLoaded",APP_MODE:"appMode",ARCH_BOUNDS:"archBounds",ARCH_SPEED:"archSpeed",ARCH_TIME:"archTime",BITRATE:"bitrate",CAM_ACTIVE:"camActive",CAM_ARCH:"camArch",CAM_ARCH_IMAGE_INFO:"camArchImageInfo",CAM_LIST:"camList",CAM_STATES:"camStates",CELL_IDX:"cellIndex",CLIPBOARD:"clipboard",COMMENTS:"comments",CONNECTION:"connection",EXPORT_TASK:"exportTask",LAYOUT_CELLS:"layoutCells",LAYOUT_LIST:"layoutList",LAYOUT_PENDING:"layoutPending",LAYOUT_SELECTED:"layoutSelected",LAYOUT_SIZE:"layoutSize",MOVE_SCALE:"moveScale",PLAYBACK:"playback",PREFS:"preferences",PTZ_READY:"ptzReady",SEARCH_RESULTS:"searchResults",SELECTOR_FILTER:"selectorFilter",SELECTOR_MODE:"selectorMode",SOURCES:"sources",SOURCES_IDX:"sourcesIndex",STATS:"statistics",VIEW_COUNT:"viewCount",ZOOM:"zoom",UPDATE_CAM_ACTIVE:"updateCamActive"};e.a={key:r}},120:function(t,e,n){"use strict";function r(){return Math.floor(1e16*Math.random()).toString(16).slice(0,12)}function i(){var t=r()+r()+r(),e=0;return[t.slice(e=0,e+=8),t.slice(e+=1,e+=4),t.slice(e+=1,e+=4),t.slice(e+=1,e+=4),t.slice(e+=1,e+=12)].join("-")}n.d(e,"a",function(){return i})},122:function(t,e,n){"use strict";var r=n(161),i=n.n(r),o=n(32),a=n.n(o),s=n(109),c=n.n(s),u=n(6),l=n.n(u),h=n(4);function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var p=l()([a()(i.a),c.a]);e.a=function(t,e){var n={},r=new Set;return function(i){var o,a=i.begintime,s=i.endtime,c=i.scale,u=[],l=this.archiveDesc,m=l.accessPoint,v=l.storage;return n=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(n,!0).forEach(function(e){f(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},n,{vsid:m,archive:v,limit:1e4,scale:c,source:e,offset:0,begintime:a,endtime:s}),r.size>0&&(h.a.arch("request cancelling (%i)",r.size),r.forEach(function(t){return t.abort()})),h.a.arch("request %s %c%s %c%s","".concat(a,"…").concat(s),"color:blue",e,"color:gray",n.archive),u.length=0,o=t(n),o.then(function i(a){var s=a.data,c=p(s);if(c.length>0&&(u=u.concat(c)),s.more){n.offset+=1e4;var l=t(n);return r.add(l),l.then(i)}return h.a.arch("request %i %c%s %c%s",u.length,"color:blue",e,"color:gray",n.archive),r.delete(o),u},function(){return r.delete(o),[]})}}},13:function(t,e,n){"use strict";n.d(e,"a",function(){return G}),n.d(e,"e",function(){return K}),n.d(e,"f",function(){return Z}),n.d(e,"b",function(){return J}),n.d(e,"g",function(){return et}),n.d(e,"q",function(){return rt}),n.d(e,"m",function(){return it}),n.d(e,"k",function(){return ot}),n.d(e,"p",function(){return at}),n.d(e,"o",function(){return st}),n.d(e,"j",function(){return ct}),n.d(e,"l",function(){return ut}),n.d(e,"h",function(){return lt}),n.d(e,"c",function(){return dt}),n.d(e,"n",function(){return ft}),n.d(e,"i",function(){return pt}),n.d(e,"d",function(){return mt});var r=n(72),i=n.n(r),o=n(102),a=n.n(o),s=n(108),c=n.n(s),u=n(6),l=n.n(u),h=n(24),d=n.n(h),f=n(84),p=n.n(f),m=n(42),v=n.n(m),b=n(223),y=n.n(b),g=n(194),O=n.n(g),w=n(21),k=n.n(w),S=n(224),j=n.n(S),_=n(283),C=n.n(_),E=n(7),P=n.n(E),x=n(53),T=n.n(x),A=n(33),I=n.n(A),L=n(284),D=n.n(L),M=n(56),$=n.n(M),R=n(47),F=n.n(R),N=n(126),z=n.n(N),B=n(39),V=n(43);function H(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function U(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function Y(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function q(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function W(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var G=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),W(this,"cacheKey",void 0),W(this,"cacheValue",void 0),this.cacheKey=void 0,this.cacheValue=void 0}var e,n,r;return e=t,n=[{key:"clear",value:function(){return this.cacheKey=void 0,this.cacheValue=void 0,this}},{key:"delete",value:function(){return this.clear(),this}},{key:"get",value:function(){return this.cacheValue}},{key:"has",value:function(t){return this.cacheKey===t}},{key:"set",value:function(t,e){return this.cacheKey=t,this.cacheValue=e,this}}],n&&q(e.prototype,n),r&&q(e,r),t}();function X(t,e){var n=e[e.length-1],r=e[0],i=e.length,o=i-1,a=-1,s=0;if(t>n)return[n,e.length-1];if(t<r)return[r,0];for(;1!==i;){if(i=Math.ceil(i/2),o+=i*a,s=e[o],s===t)return[s,o];a=s>t?-1:1}var c=Math.abs(e[o]-t),u=Math.abs(e[o+a]-t);return c>u&&(o+=a),[e[o],o]}var K=l()([X,function(t){var e=Y(t,2),n=e[1];return n}]),Z=l()([X,function(t){var e=Y(t,1),n=e[0];return n}]);function J(t,e,n){var r="",i=n;if(void 0===e){var o=new RegExp(".*".concat(t,"=([^;]+).*"));r=o.test(document.cookie)?document.cookie.replace(o,"$1"):void 0}else{if(r="".concat(t,"=").concat(e),null===e&&(i=-1),i){var a=new Date(Date.now()+i).toUTCString();r+="; expires=".concat(a)}document.cookie=r}return r}var Q="MediaSource"in window&&MediaSource.isTypeSupported('video/mp4; codecs="avc1.42c00d, mp4a.40.2"'),tt="MediaSource"in window&&MediaSource.isTypeSupported('video/mp4; codecs="hvc1.1.6.L120.80, mp4a.40.2"');function et(t){var e=window,n=e.disableMse;switch(!0){case!n&&Q&&k()(t,V.b.H264):case!n&&tt&&k()(t,V.b.H265):return V.a.MP4;default:return V.a.JPEG}}var nt=function(t){return Promise.resolve(t)};function rt(t){var e=t.map(function(t){return t.then(v.a,nt)});return Promise.all(e)}function it(t,e){var n=new XMLHttpRequest;n.open("GET","languages",!0,t,e),n.send()}var ot=function(t){return function(e){return l()([c.a,P()(function(e){var n=Y(e,2),r=n[0],i=n[1];return{tcid:t,id:r,label:i}})])(e)}};function at(t,e){var n=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?U(n,!0).forEach(function(e){W(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):U(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},e,{deltaY:-e.deltaY||-e.originalEvent.deltaY,pageX:e.pageX||e.originalEvent.pageX,pageY:e.pageY||e.originalEvent.pageY});return t(n)}function st(t,e){return e.preventDefault(),t.apply(void 0,H(e.originalEvent.changedTouches))}var ct=l()([F.a,p.a.convert({rearg:!0})(1)]),ut=function(){var t=Object(B.a)(window.location.href.replace(/[^/]*$/,""));window.location.href=t},lt=l()(y()(["getResponseHeader"],["Location"]),$()(/^\//,"")),ht=function(t){return i()([t,[z.a,v.a]])},dt=function t(e){return ht([C.a,l()(T()(t),D()(j.a),ht([O.a,I.a]))])(e)},ft=a()(function(t,e){var n=0,r=e;for(e>t&&(n=-t),e<0&&(n=t);r>t||r<0;r+=n);return r});function pt(t){return T.a.convert({cap:!1})(function(e,n){return d()(v.a,[n],t)(e)})}function mt(t){return delete t.toString,t}},130:function(t,e,n){"use strict";n.d(e,"b",function(){return v}),n.d(e,"d",function(){return b}),n.d(e,"c",function(){return y}),n.d(e,"a",function(){return g});var r=n(1),i=n(3),o=n.n(i),a=n(15),s=n(11),c=n(171),u=n(101),l=n(4),h=(n(37),n(59)),d=n(5),f=n(9);function p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function m(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v(){var t,e;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,regeneratorRuntime.awrap(s.s());case 3:t=n.sent,e=t.data.version,l.a.common("host version",e),n.next=12;break;case 8:return n.prev=8,n.t0=n.catch(0),n.next=12,regeneratorRuntime.awrap(s.H());case 12:case"end":return n.stop()}},null,null,[[0,8]])}function b(){return l.a.common("fetch locale"),s.G().then(o()(["data","languages"]),function(){return Promise.resolve(window.navigator.userLanguage||window.navigator.language)}).then(function(t){var e=t.substr(0,2).toLowerCase();return new Promise(function(t){Object(c.a)(e,function(n){t(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(n,!0).forEach(function(e){m(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({lang:e},n))})})}).then(function(t){return l.a.common("fetch locale %cdone","{color: green}"),f.a.locale=t,r.a.datepicker&&r.a.datepicker.setDefaults(f.a.locale.calendar),r.a.timepicker&&r.a.timepicker.setDefaults(f.a.locale.calendar),t})}function y(){return s.t().then(o()("data"),r.a.noop).then(h.h).then(function(t){return Object(a.b)(a.b.key.LAYOUT_LIST).put(t)}).then(function(){return Object(a.b)(a.b.key.APP_LOADED).put(!0)},r.a.noop)}function g(){var t=new u.c({fails:f.a.settings.errorThreshold,heartbeat:s.I.bind(null,d.i),interval:d.i,topic:Object(a.b)(a.b.key.CONNECTION)});t.heartbeat()}},134:function(t,e,n){"use strict";n.d(e,"a",function(){return f}),n.d(e,"b",function(){return m});var r=n(108),i=n.n(r),o=n(161),a=n.n(o),s=n(34),c=n.n(s);function u(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function h(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return a()(t)?c()(function(t,n){var r=h(n,2),i=r[0],o=r[1];return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(n,!0).forEach(function(e){d(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},t,{},f(o,[].concat(u(e),[i])))},[],i()(t)):d({},e.join("."),t)}var p=window.navigator.language||window.navigator.userLanguage,m="string"==typeof p?p.slice(0,2):"en"},135:function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t){return"function"==typeof t}n.d(e,"a",function(){return o});var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.queue=[],this.pending=!1,this.callback=Function.prototype,this.next=this.next.bind(this)}var e,n,o;return e=t,n=[{key:"getState",value:function(){return{pending:this.pending,length:this.queue.length}}},{key:"onUpdate",value:function(t){return"function"==typeof t&&(this.callback=t),this}},{key:"clear",value:function(){return this.pending=!1,this.queue.length=0,this}},{key:"next",value:function(){if(this.pending=!0,0===this.queue.length)return this.pending=!1,void this.callback(this.getState());var t,e=this.queue.shift(),n=i(e)?e():e;this.callback(this.getState()),Promise.resolve(n).then(this.next,(t=this.next,function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return console.error("job failed: %o",n),t.apply(void 0,n)}))}},{key:"push",value:function(t){if(o=t,o&&"function"==typeof o.then)this.queue.push(t);else{if(!i(t))throw new Error("Not a function nor a Promise");for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];this.queue.push(t.bind.apply(t,[null].concat(n)))}var o;return this.pending||this.next(),this}}],n&&r(e.prototype,n),o&&r(e,o),t}()},136:function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",function(){return o});var o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,"cache",void 0),i(this,"cacheTime",void 0),i(this,"validTime",void 0),this.cache=new Map,this.cacheTime=new Map,this.validTime=e}var e,n,o;return e=t,n=[{key:"valid",value:function(t){var e=this.cacheTime.get(t)||0;return!(Date.now()-e>this.validTime)||(this.delete(t),!1)}},{key:"has",value:function(t){return this.cacheTime.has(t)&&this.valid(t)}},{key:"set",value:function(t,e){var n=this;return e instanceof Promise&&e.then(void 0,function(){return n.delete(t)}),this.cacheTime.set(t,Date.now()),this.cache.set(t,e),this}},{key:"get",value:function(t){return this.valid(t)&&this.cache.get(t)}},{key:"delete",value:function(t){return this.cacheTime.delete(t),this.cache.delete(t),this}},{key:"clear",value:function(){return this.cacheTime.clear(),this.cache.clear(),this}}],n&&r(e.prototype,n),o&&r(e,o),t}()},137:function(t,e,n){"use strict";function r(t,e){if(!(this instanceof r))return new r(t,e);this.time={begin:t.getTime(),end:e.getTime()},this.date={begin:t,end:e}}r.prototype={inner:function(t){var e=t.getTime();return this.time.begin<=e&&this.time.end>=e},more:function(t){var e=t.getTime();return this.time.begin>e&&this.time.end>e},less:function(t){var e=t.getTime();return this.time.begin<e&&this.time.end<e}},e.a=r},138:function(t,e,n){"use strict";n.d(e,"c",function(){return X}),n.d(e,"b",function(){return K});var r=n(51),i=n(9),o=n(165),a=n.n(o),s=n(132),c=n.n(s),u=n(46),l=n.n(u),h=n(21),d=n.n(h),f=n(201),p=n.n(f),m=n(139),v=n.n(m),b=n(34),y=n.n(b),g=n(47),O=n.n(g),w=n(69),k=n.n(w),S=n(43),j=n(39),_=n(115),C=n(136),E=n(65),P=n(4),x=n(73),T=n(5);function A(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function I(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function L(t,e,n){return e&&I(t.prototype,e),n&&I(t,n),t}function D(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function M(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function $(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?M(n,!0).forEach(function(e){R(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function R(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function F(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var N=c()({method:d()("batch")}),z=c()({method:d()("play"),speed:d()(0),beginTime:p.a,archive:p.a}),B=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.endpoint,n=t.beginTime,r=t.archive;return[e,n,r].join(" ")},V=function(t){var e=t.timestampList,n=F(t,["timestampList"]),r=$({},n);return 1===O()(e)?(r.method="play",r.beginTime=l()(e)):(r.method="batch",r.timestampList=e),r},H=function(t){return function(e){var n=e.beginTime,r=e.timestampList,i=F(e,["beginTime","timestampList"]);return k()(["cmd"],V,y.a.convert({cap:!1})(function(t){return function(e,n,r){var i=e.buffer,o=e.cmd,a=B($({},o,{beginTime:n})),s=o,c=i;return t.has(a)?c[r]=t.get(a):s=k()(["timestampList"],function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[].concat(D(t),[n])},s),{buffer:c,cmd:s}}}(t))({buffer:[],cmd:i},a()([n].concat(r))))}};var U=function(){function t(e,n){var r=this;A(this,t),R(this,"key",void 0),R(this,"conn",void 0),R(this,"mediaState",void 0),R(this,"pending",void 0),R(this,"resolve",void 0),R(this,"width",void 0),R(this,"catchMedia",function(t){var e=t.data,n=e;n.key===r.key&&(r.resolve(n),r.mediaState=r.mediaState.stop())});var i=Object(x.b)(),o=i.promise,a=i.resolve;this.key=-1,this.conn=e,this.mediaState=Object(_.a)(this),this.pending=o,this.resolve=a,this.width=n}return L(t,[{key:"request",value:function(t){var e=this;return this.mediaState=this.mediaState.play(t),this.pending.abort=function(){e.mediaState=e.mediaState.stop()},this.pending}},{key:"updateIndex",value:function(t){var e=this;this.key=Object(E.b)(t),this.pending=new Promise(function(t){e.resolve=t,e.conn.addEventListener("message",e.catchMedia)})}},{key:"clearIndex",value:function(){this.conn.removeEventListener("message",this.catchMedia)}},{key:"setType",value:function(){}}]),t}(),Y=function(){function t(e,n){var i=this;A(this,t),R(this,"key",void 0),R(this,"buffer",void 0),R(this,"conn",void 0),R(this,"count",void 0),R(this,"mediaState",void 0),R(this,"catchMedia",function(t){var e=t.data,n=e,r=n.key===i.key;r&&i.count>0&&(i.count-=1,i.emit(n)),0===i.count&&i.stop()}),R(this,"stop",function(){i.mediaState=i.mediaState.stop(),i.emit(r.a)}),this.key=-1,this.conn=e,this.count=0,this.emit=n,this.mediaState=Object(_.a)(this)}return L(t,[{key:"request",value:function(t){return this.count=t.timestampList.length,this.mediaState=this.mediaState.batch(t),this.stop}},{key:"updateIndex",value:function(t){this.key=Object(E.b)(t),this.conn.addEventListener("message",this.catchMedia)}},{key:"clearIndex",value:function(){this.conn.removeEventListener("message",this.catchMedia)}},{key:"setType",value:function(){}}]),t}(),q=new Worker(Object(j.a)("conn.js")),W=i.a.settings.frameWidthList[2],G=function(t){var e=regeneratorRuntime.mark(u),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:T.d,r=new C.a(n),i=H(r),o=new MessageChannel,a=o.port1,s=o.port2,c=new Map;function u(t,n){var r,i,o,a,u,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=!0,i=!1,o=void 0,e.prev=3,a=n[Symbol.iterator]();case 5:if(r=(u=a.next()).done){e.next=16;break}if(l=u.value,void 0!==l){e.next=11;break}return void(e.next=10);case 10:return e.abrupt("continue",13);case 11:l.key=t,s.postMessage(l);case 13:r=!0,e.next=5;break;case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(3),i=!0,o=e.t0;case 22:e.prev=22,e.prev=23,r||null==a.return||a.return();case 25:if(e.prev=25,!i){e.next=28;break}throw o;case 28:return e.finish(25);case 29:return e.finish(22);case 30:c.delete(t);case 31:case"end":return e.stop()}},e,null,[[3,18,22,30],[23,,25,29]])}return a.start(),s.start(),s.addEventListener("message",function(e){var n=e.data,o=n,a=z(o)||N(o),s=a?i(o):{cmd:o,buffer:[]},l=s.cmd,h=s.buffer,d=N(l)?O()(l.timestampList):1;if(0!==h.length){var f=Object(E.b)(l.streamId),p=u(f,h);p.next(),c.set(f,p)}0!==d&&(a&&function(t,e,n){var r=Object(E.b)(n.streamId),i=O()(n.timestampList),o=0;e.addEventListener("message",function a(s){var c=s.data,u=c,l=N(n)?v()(o,n.timestampList):n.beginTime;if(u.key===r){var h=B($({},n,{beginTime:l}));t.set(h,u),P.a.ws("cache","cached new frame for ".concat(h," ").concat(u.checksum)),o+=1}o===i&&e.removeEventListener("message",a)})}(r,t,l),t.postMessage(l))}),t.addEventListener("message",function(t){var e=t.data;s.postMessage(e),c.has(e.key)&&c.get(e.key).next()}),a}(q);function X(t){var e=t.endpoint,n=t.format,r=void 0===n?S.a.JPEG:n,i=t.beginTime,o=t.archive,a=void 0===o?"":o,s=t.speed,c=void 0===s?0:s,u=t.width,l=void 0===u?W:u,h=t.keyFrames,d=void 0!==h&&h;return new U(G).request({endpoint:e,format:r,beginTime:i,archive:a,speed:c,width:l,keyFrames:d})}function K(t,e){var n=t.endpoint,r=t.format,i=void 0===r?S.a.JPEG:r,o=t.keyFrames,a=void 0!==o&&o,s=t.timestampList,c=void 0===s?[]:s,u=t.archive,l=void 0===u?"":u,h=t.width,d=void 0===h?W:h;return new Y(G,e).request({endpoint:n,format:i,keyFrames:a,timestampList:c,archive:l,width:d})}window.addEventListener("unload",function(){return q.terminate()}),e.a=G},15:function(t,e,n){"use strict";var r=n(1),i=n(135),o=n(173),a=n(12),s=n(67),c=n(127),u=n.n(c),l=n(156),h=n.n(l),d=n(4),f=n(16);n(330);function p(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function m(t){var e=t.pos;return Object(r.a)("<div>").addClass("layout-showcase__layout__cell").css({left:Object(f.a)(e.left),right:Object(f.a)(e.right),top:Object(f.a)(e.top),bottom:Object(f.a)(e.bottom)})}function v(t,e){var n,i=r.a.map(t.cells,m),o=(n=Object(r.a)("<div>").addClass("layout-showcase__layout-overview")).append.apply(n,p(i)),a=Object(r.a)("<span>").addClass("layout-showcase__layout-name").text(t.displayName);return Object(r.a)("<li>").data({idx:e}).attr({title:t.displayName}).addClass("layout-showcase__layout").append(o).append(a)}var b=h()(u()("idx"));r.a.widget("app.layoutShowcase",{_create:function(){var t=this;this.disable=this.setEnable.bind(this,!1),this.enable=this.setEnable.bind(this,!0),this.waitUntilDone=this.waitUntilDone.bind(this),this.updateList=this.updateList.bind(this),this.updateSelect=this.updateSelect.bind(this),this.handleSelect=this.handleSelect.bind(this),this.closeListClickOut=this.closeListClickOut.bind(this),this.handleToggleOpenList=this.handleToggleOpenList.bind(this),this.$list=Object(r.a)("<ul>").addClass("layout-showcase__layout-list"),this.$label=Object(r.a)("<label>").addClass("layout-showcase__arrow"),this.$checkbox=Object(r.a)("<input>").attr({type:"checkbox",hidden:"hidden"}).addClass("layout-showcase__arrow-checkbox"),this.$input=Object(r.a)("<input>").addClass("layout-showcase__input"),this.$label.on({click:function(){document.body.addEventListener("click",t.closeListClickOut,!0),t.handleToggleOpenList()}}),this.topic(this.topic.key.LAYOUT_LIST).observe(this.updateList),this.topic(this.topic.key.LAYOUT_SELECTED).observe(this.updateSelect);var e=function e(n){n.stopPropagation(),Object(r.a)(window).off({keydown:e}),t.$input.appendTo(t.element).on({keyup:function(){var e=t.$input.val(),n=t.$list.get(0),r=n.querySelector("li[title*='".concat(e,"' i]"));r&&r.scrollIntoView({behavior:"smooth"})}}).focus()};this.element.addClass("layout-showcase").append(this.$list).append(this.$checkbox).append(this.$label),this.element.on({click:this.handleSelect,transitionend:function(){var e=t.topic(t.topic.key.LAYOUT_SELECTED).get();if(e){var n=t.$list.children().eq(e.idx);t.$list.scrollTop(t.$list.scrollTop()+n.offset().top+n.height()-t.$list.outerHeight())}},mouseenter:function(){Object(r.a)(window).on({keydown:e})},mouseleave:function(){Object(r.a)(window).off({keydown:e}),t.$input.remove().val("")}})},closeListClickOut:function(t){var e=t.target.classList.contains("layout-showcase__layout");e||(t.preventDefault(),t.stopPropagation(),this.handleToggleOpenList()),document.body.removeEventListener("click",this.closeListClickOut,!0)},handleToggleOpenList:function(){var t=this.$checkbox.prop("checked");this.$list.toggleClass("layout-showcase__layout-list--opened",!t),this.$checkbox.prop({checked:!t})},updateList:function(t){var e,n=r.a.map(t,v);(e=this.$list.empty()).append.apply(e,p(n))},updateSelect:function(t){var e=t.idx;this.$list.children().removeClass("layout-showcase__layout--selected").eq(e).addClass("layout-showcase__layout--selected")},setEnable:function(t){this.element.toggleClass("layout-showcase--disabled",!t),this.enabled=t,d.a.layout("showcase","is enabled: ".concat(t))},waitUntilDone:function(t){t||this.enable()},handleSelect:function(t){var e=Object(r.a)(t.target).data(),n=this.$checkbox.prop("checked");b(e)||(n&&this.handleToggleOpenList(),this.topic(this.topic.key.LAYOUT_SELECTED).put(e))}});n(207);var y=n(9),g=n(11);n(332);r.a.widget("app.logout",{options:{target:Object(r.a)()},defaultElement:"<a>",_create:function(){this.element.addClass("logout").text(y.a.locale.logout).on({click:g.H}).appendTo(this.options.target)}});var O=n(164),w=n.n(O),k=n(144),S=n.n(k),j=n(3),_=n.n(j),C=n(291),E=n.n(C),P=n(68),x=n.n(P),T=n(111),A=n.n(T),I=n(138),L=n(101),D=n(5);n(275),n(248);function M(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function $(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var R=function(t){return t.element},F=_()(["origin"]),N=w()(F),z=E()(F),B=x()(["origin"]);r.a.widget("app.multiCam",{options:{rows:2,cols:2},CSS_LAYOUT:"layout",CSS_ROW:"layout__row",INTERVAL:D.i,_init:function(){var t=this;this.cells=[],this.rows=0,this.cols=0,this.recvBytes=0,this.setCells=this.setCells.bind(this),this.updateCells=this.updateCells.bind(this),this.distributeData=this.distributeData.bind(this),this.initIndex=this.initIndex.bind(this),this.handleConn=this.handleConn.bind(this),this.videoSuspend=this.videoSuspend.bind(this),this.stats=this.stats.bind(this),this.conn=I.a,this.conn.addEventListener("message",this.distributeData),this.topic(this.topic.key.LAYOUT_CELLS).observe(this.setCells),this.topic(this.topic.key.STATS).observe(this.stats),this.initIndex(),Object(r.a)(document).on({visibilitychange:function(e){var n=e.target.hidden;return t.videoSuspend(n)}}),this.topic(this.topic.key.CONNECTION).observe(this.handleConn)},_create:function(){this.element.addClass(this.CSS_LAYOUT)},_destroy:function(){this.topic(this.topic.key.LAYOUT_CELLS).unobserve(this.setCells),this.topic(this.topic.key.STATS).unobserve(this.stats),this.topic(this.topic.key.CONNECTION).unobserve(this.handleConn),this.conn.removeEventListener("message",this.distributeData),this.element.remove()},setCells:function(t){var e,n,r=t.length-this.cells.length,i=this.createCells(r),o=(e=this.cells).splice.apply(e,$([this.cells.length+r,-r].concat(i)));d.a.video("MultiCam +%d -%d =%d",i.length,o.length,this.cells.length),o.forEach(this.destroyCell),(n=this.element).append.apply(n,$(i.map(R))),this.updateCells(t)},_setCells:function(t){var e;this.cells.forEach(this.destroyCell),this.cells=this.createCells(t.length),(e=this.element).append.apply(e,$(this.cells.map(R))),this.updateCells(t)},updateCells:function(t){var e=N(t,this.cells),n=N(this.cells,t),r=A()(n,e);S()(function(t){var e=M(t,2),n=e[0],r=e[1];return n.option(r)},r);var i=B(z(t,this.cells)),o=B(z(this.cells,t)),a=A()(o,i);S()(function(t){var e=M(t,2),n=e[0],r=e[1],i=r.origin,o=r.pos;return n.option({origin:i,pos:o})},a)},setSize:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[this.options.cols,this.options.rows];d.a.deprecated();var n=e[0],r=e[1],i=r*n,o=this.cells.length,a=o-i,s=this.createCells(-a),c=[];c=(t=this.cells).splice.apply(t,$([o-a,a].concat(s))),c.forEach(this.destroyCell),this.topic(this.topic.key.VIEW_COUNT).put(this.rows*this.cols)},createCells:function(t){for(var e=[],n=this.cells.length,i=n+t,o=n;o<i;o+=1)e.push(r.a.app.videoCell({key:o,conn:this.conn}));return e},destroyCell:function(t){t.destroy(),t.element.remove()},setRows:function(t){var e=-(this.rows-t),n=this.element.find(".".concat(this.CSS_ROW)),i=[],o=0;for(o=0;o<e;o+=1)i.push(Object(r.a)("<div>").addClass(this.CSS_ROW));this.element.append(i),e<0&&n.slice(e).each(this.removeRow),this.rows=t},removeRow:function(t,e){e.remove()},reorderByCols:function(t,e){var n=this.element.find(".".concat(this.CSS_ROW)),r=t.length,i=0,o=0;for(i=0;i<r;i+=1)o=Math.floor(i/e),n.eq(o).append(t[i].element);this.cols=e},getRecvBytes:function(){var t=this.recvBytes;return this.recvBytes=0,{bytes:t,streams:this.topic(this.topic.key.CELL_IDX).get().size}},publishRate:function(t){t.topic(t.topic.key.BITRATE).put(t.getRecvBytes())},stats:function(t){t?this.rateTimer=setInterval(this.publishRate,this.INTERVAL,this):clearInterval(this.rateTimer)},initIndex:function(){var t=this,e=new Map;e.toString=function(){return Object.keys(t).slice(-1).join(" ")},this.topic(this.topic.key.CELL_IDX).put(e)},distributeData:function(t){var e=t.data,n=this.topic(this.topic.key.CELL_IDX).get().get(e.key);n&&(this.recvBytes+=e.payload.byteLength,n.push(e))},handleConn:function(t){var e=t===L.a;this.videoSuspend(e)},videoSuspend:function(t){var e,n=this.topic(this.topic.key.ARCH_TIME).get(),r=this.topic(this.topic.key.PREFS).get(),i=r.disconnectInactive;i&&(!t&&Number.isFinite(this.keptSpeed)&&(e=this.keptSpeed,this.keptSpeed=void 0),t&&(e=0,this.keptSpeed=this.topic(this.topic.key.PLAYBACK).get().speed),(e||n)&&this.topic(this.topic.key.PLAYBACK).assign({speed:e,beginTime:n}))}}),r.a.widget("app.rateIndicator",{_create:function(){this.element.addClass("rate-indicator").addClass("hidden"),this.stats=this.stats.bind(this),this.render=this.render.bind(this),this.topic(this.topic.key.STATS).observe(this.stats)},_destroy:function(){this.topic(this.topic.key.STATS).unobserve(this.stats)},render:function(t){var e=t.bytes,n=t.streams,r=Date.now(),i=r-this.lastTime;this.element.text("".concat(Object(f.h)(e,i).toFixed(2)," KB/s (").concat(n,")")),this.lastTime=r},stats:function(t){t?(this.topic(this.topic.key.BITRATE).observe(this.render),this.lastTime=Date.now()):(this.element.text(""),this.topic(this.topic.key.BITRATE).unobserve(this.render)),this.element.toggleClass("hidden",!t)}});var V=n(24),H=n.n(V),U=n(7),Y=n.n(U),q=n(95),W=n(13);function G(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var X=Y.a.convert({cap:!1});H()({});r.a.widget("app.selectArch",{options:{idx:-1},defaultElement:"<div>",_create:function(){this.update=this.update.bind(this),this.updateSelected=this.updateSelected.bind(this),this.setArch=this.setArch.bind(this),this.toggleShow=this.toggleShow.bind(this),this.$select=Object(r.a)("<select>").addClass("VideoCell-opts__selector").on({change:this.setArch}),this.element.addClass("VideoCell-opts").addClass("hidden").append(this.$select),this.topic(this.topic.key.CAM_ARCH).observe(this.toggleShow)},setCamera:function(t){this.camera&&this.camera.archSelected.unobserve(this.updateSelected),t&&(this.camera=t,this.camera.archSelected.observe(this.updateSelected),this.update())},setArch:function(t){var e=t.target.value;this.camera.setArchSelectedByIdx(e)},update:function(){var t;if(this.camera){var e=this.camera.archList,n=X(function(t,e){var n=Object(q.a)(t.storage)?y.a.locale.embeddedStorage:t.storageDisplayName;return Object(r.a)("<option>").attr({value:e}).data(t).text(n)}),i=n(e);(t=this.$select.empty()).append.apply(t,G(i)),this.element.toggleClass("VideoCell-opts--active",Object(W.j)(i))}else this.$select.empty()},updateSelected:function(t){var e=this.camera.getArchIdx(t);this.$select.val(e)},toggleShow:function(t){this.element.toggleClass("hidden",Boolean(!t))},_destroy:function(){this.topic(this.topic.key.CAM_ARCH).unobserve(this.toggleShow)}});n(342);r.a.widget("app.notify",{options:{text:""},_create:function(){var t=this;this.$notify=Object(r.a)("<div>").addClass("notify").text(this.options.text).appendTo(document.body),this.$notify.fadeIn().delay(D.h).fadeOut().queue(function(){return t.destroy()})},_destroy:function(){this.$notify.remove(),this.$notify=void 0}});n(343);r.a.widget("app.offlineSign",{_create:function(){var t=Object(r.a)("<div>").text(y.a.locale.serverOffline);this.handleConn=this.handleConn.bind(this),this.topic(this.topic.key.CONNECTION).observe(this.handleConn),this.element.addClass("offline-sign").addClass("hidden").append(t)},_destroy:function(){this.topic(this.topic.key.CONNECTION).unobserve(this.handleConn)},handleConn:function(t){var e=t===L.b;this.element.toggleClass("hidden",e)}}),n.d(e,"b",function(){return K}),n.d(e,"a",function(){return Z});var K=Object.assign(o.a,a.a),Z=new i.a;Object.values(r.a.app).forEach(function(t){t.prototype.topic=K}),s.a.prototype.topic=K},16:function(t,e,n){"use strict";n.d(e,"l",function(){return k}),n.d(e,"h",function(){return S}),n.d(e,"e",function(){return _}),n.d(e,"f",function(){return C}),n.d(e,"i",function(){return E}),n.d(e,"m",function(){return P}),n.d(e,"k",function(){return x}),n.d(e,"j",function(){return T}),n.d(e,"g",function(){return A}),n.d(e,"a",function(){return I}),n.d(e,"b",function(){return L}),n.d(e,"d",function(){return D}),n.d(e,"c",function(){return M});var r=n(106),i=n.n(r),o=n(6),a=n.n(o),s=n(32),c=n.n(s),u=n(159),l=n.n(u),h=n(7),d=n.n(h),f=n(169),p=n.n(f),m=n(290),v=n.n(m),b=n(170),y=n.n(b),g=n(110),O=n.n(g),w=n(5);function k(t){return"".concat((t/1e6).toFixed(2),"Mbps")}function S(t,e){var n=t>>10;return n/(e*w.e)}var j=Intl.DateTimeFormat("en",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"}),_=j.format;function C(t){var e=Math.floor(t/w.d),n=Math.floor(t%w.d/w.f),r=Math.floor(t%w.f/w.h);return[E(e),E(n),E(r)].join(":")}function E(t,e){return isFinite(t)?t.toString(e).padStart(2,"0"):""}var P=a()([l.a,d()(function(t){var e=t;return e=(240&e)>>4|(15&e)<<4,e=(204&e)>>2|(51&e)<<2,e=(170&e)>>1|(85&e)<<1,e}),d()(function(t){return t.toString(16)}),d()(p()("0")(2)),y()(""),v()("0"),O.a]),x=a()([c()(Boolean),d()(function(t){return t.toString(16)}),d()(p()("0")(2)),y()("")]),T=a()([d()(function(t){return t.toString(16)}),d()(p()("0",2)),y()(""),O.a]);function A(t){var e=E(t.getDate()),n=E(t.getMonth()+1),r=t.getFullYear(),i=E(t.getHours()),o=E(t.getMinutes()),a=E(t.getSeconds());return"".concat(r,"-").concat(n,"-").concat(e,"--").concat(i,"-").concat(o,"-").concat(a)}function I(t){return"".concat(Math.round(100*t),"%")}var L=function(t){return t.toFixed(3)},D=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return i()(new Date(t),"HH:MM:ss dd.mm.yyyy")},M=function(t){return(t/1e6).toFixed(2)}},1605:function(t,e,n){n(399),n(413),t.exports=n(1629)},1606:function(t,e,n){},1629:function(t,e,n){"use strict";n.r(e);var r=n(0),i=n.n(r),o=n(8),a=n(63),s=n(6),c=n.n(s),u=n(32),l=n.n(u),h=n(3),d=n.n(h),f=n(259),p=n.n(f),m=n(7),v=n.n(m),b=n(352),y=n.n(b),g=n(167),O=n.n(g),w=n(228),k=n.n(w),S=(n(767),n(150),n(861)),j=n.n(S),_=n(60),C=n.n(_),E=n(354),P=n.n(E),x=n(390),T=n.n(x),A=n(447),I=n.n(A),L=n(512),D=n.n(L),M=n(57),$=n.n(M),R=n(17),F=n(11),N=n(171),z=n(130),B=n(27),V=n(134),H=n(13),U=n(5),Y=n(9),q=(n(1606),n(862)),W=n.n(q),G=n(863),X=n.n(G),K=n(155),Z=n.n(K),J=n(278),Q=n.n(J),tt=n(280),et=n.n(tt),nt=n(66),rt=n.n(nt),it=n(279),ot=n.n(it),at=n(175),st=n.n(at),ct=n(16),ut=n(68),lt=n.n(ut),ht=n(95),dt=function(t){var e=t.resolution,n=t.fps,r=t.bitrate,o=t.streamType,a=t.score;return[i.a.createElement(rt.a,{key:"res"},e),i.a.createElement(rt.a,{numeric:!0,key:"fps"},n),i.a.createElement(rt.a,{numeric:!0,key:"brt"},r),i.a.createElement(rt.a,{key:"typ"},o),i.a.createElement(rt.a,{key:"wrn"},a)]},ft=n(393),pt=n.n(ft),mt=n(864),vt=n.n(mt),bt=n(555),yt=n.n(bt),gt=n(511),Ot=n.n(gt),wt=n(677),kt=n.n(wt),St=n(676),jt=n.n(St),_t=Object(R.withStyles)({root:{color:jt.a[500]}})(pt.a),Ct=Object(R.withStyles)({root:{color:kt.a[500]}})(yt.a),Et=Object(R.withStyles)({root:{color:Ot.a[500]}})(vt.a),Pt=function(t){var e=t.score;return i.a.createElement("span",{title:function(t){switch(t){case 0:return"OK";case 1:return"> 1Mbps/Mpixel";default:return"> 2Mbps/Mpixel"}}(e)},function(t){switch(t){case 0:return i.a.createElement(_t,null);case 1:return i.a.createElement(Ct,null);default:return i.a.createElement(Et,null)}}(e))};function xt(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Tt=[],At=lt()(function(t){var e=t.id;return Number(e)}),It=function(t){t.host;var e=t.list,n=t.stats;t.classes;return xt(At(e).map(function(t){var e=n.get(t.channel)||Tt,r=e.map(function(t){var e=t.width,n=t.height,r=t.fps,o=t.bitrate,a=t.streamType,s=t.score;return dt({resolution:e&&"".concat(e,"⨯").concat(n),fps:function(t){return t.toFixed(2)}(r),bitrate:Object(ct.c)(o),streamType:Object(ht.b)(a),score:i.a.createElement(Pt,{score:s})})});return[i.a.createElement(st.a,{key:t.origin,hover:!0},i.a.createElement(rt.a,{component:"th",scope:"row"}),i.a.createElement(rt.a,{component:"th",scope:"row"},"".concat(t.id,". ").concat(t.displayName)),r)]}))};function Lt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Dt(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Mt=X()(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t+e}),$t=Object(R.withStyles)({root:{display:"inline-block",minWidth:"100%"}})(function(t){var e=t.hosts,n=t.stats,r=t.classes;return i.a.createElement(Z.a,{className:r.root,square:!0},i.a.createElement(Q.a,null,i.a.createElement(ot.a,null,i.a.createElement(st.a,null,i.a.createElement(rt.a,null,"Host"),i.a.createElement(rt.a,null,"Name"),W()(null)(Math.max.apply(Math,Dt(Dt(n.values()).map(function(t){return t.length})).concat([0]))).map(function(){return dt({resolution:"Resolution",fps:"FPS",bitrate:"Bitrate(Mbps)",streamType:"Format",score:"Warn"})}))),i.a.createElement(et.a,null,Object.entries(e).map(function(t){var e=Lt(t,2),r=e[0],o=e[1];return[i.a.createElement(st.a,{key:r,selected:!0},i.a.createElement(rt.a,null,r),i.a.createElement(rt.a,null),function(t,e){return t.reduce(function(t,n){var r=n.dev;return Mt(t,(e.get(r)||Tt).map(function(t){var e=t.bitrate;return e}))},0)}(o,n).map(function(t){return dt({bitrate:Object(ct.c)(t)})})),i.a.createElement(It,{key:"".concat(r,"_stats-list"),host:r,list:o,stats:n})]}))))}),Rt=n(253),Ft=n.n(Rt),Nt=n(225),zt=n.n(Nt),Bt=n(198),Vt=n.n(Bt),Ht=i.a.createElement(zt.a,{position:"start"},i.a.createElement(Vt.a,null));var Ut=Object(R.withStyles)(function(t){return{search:{borderRadius:t.shape.borderRadius,backgroundColor:t.palette.action.selected,"&:hover":{backgroundColor:t.palette.action.disabled},margin:[[0,"auto"]]}}})(function(t){var e=t.classes,n=t.onChange;return i.a.createElement("div",{className:e.search},i.a.createElement(Ft.a,{disableUnderline:!0,startAdornment:Ht,onChange:n}))}),Yt=n(446),qt=n.n(Yt),Wt=n(258),Gt=n.n(Wt),Xt=n(865),Kt=n.n(Xt),Zt=n(866),Jt=n.n(Zt);function Qt(t){return Qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qt(t)}function te(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ee(t){return ee=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},ee(t)}function ne(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function re(t,e){return re=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},re(t,e)}var ie=function(t){function e(){var t,n,r,i,o,a,s;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var c=arguments.length,u=new Array(c),l=0;l<c;l++)u[l]=arguments[l];return r=this,i=(t=ee(e)).call.apply(t,[this].concat(u)),n=!i||"object"!==Qt(i)&&"function"!=typeof i?ne(r):i,o=ne(n),a="state",s={client:"ASIP-ANWC-WC-974",host:"⋯"},a in o?Object.defineProperty(o,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):o[a]=s,n}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&re(t,e)}(e,t),n=e,r=[{key:"componentDidMount",value:function(){var t=this;Object(F.s)().then(function(e){var n=e.data.version;return t.setState(function(){return{host:n}})})}},{key:"render",value:function(){var t=this.props.classes,e=this.state,n=e.client,r=e.host;return i.a.createElement("div",{className:t.root},[i.a.createElement(Gt.a,{key:"client",className:t.chip,avatar:i.a.createElement(qt.a,null,i.a.createElement(Kt.a,null)),label:n}),i.a.createElement(Gt.a,{key:"host",className:t.chip,avatar:i.a.createElement(qt.a,null,i.a.createElement(Jt.a,null)),label:r})])}}],r&&te(n.prototype,r),o&&te(n,o),e}(i.a.Component),oe=Object(R.withStyles)(function(t){return{root:{display:"flex",marginLeft:"auto"},chip:{margin:t.spacing.unit}}})(ie);var ae=Object(r.memo)(function(){return i.a.createElement(ot.a,null,i.a.createElement(st.a,null,i.a.createElement(rt.a,null,"Host"),i.a.createElement(rt.a,null,"Archive"),i.a.createElement(rt.a,{numeric:!0},"Number of Cameras"),i.a.createElement(rt.a,{numeric:!0},"Total Bitrate(Mbps)")))}),se=n(223),ce=n.n(se),ue=n(34),le=n.n(ue),he=n(69),de=n.n(he),fe=n(392),pe=n.n(fe);var me=Object(r.memo)(function(t){var e=t.archive,n=t.cameras,r=t.totalBitrate;return i.a.createElement(st.a,{hover:!0},i.a.createElement(rt.a,null),i.a.createElement(rt.a,null,e),i.a.createElement(rt.a,{numeric:!0},n),i.a.createElement(rt.a,{numeric:!0},Object(ct.c)(r)))});function ve(){return ve=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ve.apply(this,arguments)}function be(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function ye(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ge=pe()(function(t){return Object.keys(t).map(function(e){return{archive:e,cameras:t[e].count,totalBitrate:t[e].totalBitrate}})},function(t){var e=t.list,n=t.stats;return c()([k()(function(t){var e=t.channel,n=t.archives;return k()(function(t){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?be(n,!0).forEach(function(e){ye(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):be(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({channel:e},t)},n)}),l()(function(t){var e=t.isEmbedded;return!e}),le()(function(t,e){var r=e.channel,i=e.storageDisplayName,o=e.accessPoint;return de()([i],function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{count:0,totalBitrate:0},e=t.count,i=t.totalBitrate,a=function(t,e,n){return c()(ce()("get",[t]),l()(function(t){return t.accessPoint===n}),le()(function(t,e){return e.bitrate+t},0))(e)}(r,n,o);return{count:a?e+1:e,totalBitrate:i+a}},t)},{})])(e)});var Oe=function(t){var e=t.list,n=t.host,o=t.stats,a=ge({list:e,stats:o});return i.a.createElement(r.Fragment,null,i.a.createElement(st.a,{selected:!0},i.a.createElement(rt.a,null,n),i.a.createElement(rt.a,null),i.a.createElement(rt.a,null),i.a.createElement(rt.a,null)),a.map(function(t){return i.a.createElement(me,ve({key:t.archive},t))}))};var we=function(t){var e=t.listByHost,n=t.stats;return i.a.createElement(Z.a,{square:!0},i.a.createElement(Q.a,null,i.a.createElement(ae,null),i.a.createElement(et.a,null,Object.keys(e).map(function(t){return i.a.createElement(Oe,{key:t,host:t,list:e[t],stats:n})}))))};function ke(t){return ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ke(t)}function Se(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function je(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _e(t){return _e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},_e(t)}function Ce(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ee(t,e){return Ee=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Ee(t,e)}function Pe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function xe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Pe(n,!0).forEach(function(e){Te(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pe(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function Te(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ae=Object(R.createMuiTheme)({palette:{type:"dark"}}),Ie=(U.h,1e3),Le=function(t){return xe({score:(e=t,n=e.width,r=e.height,i=e.bitrate,Math.floor(i/(n*r)))},t);var e,n,r,i},De=p()("host"),Me=c()(k()(v()(d()(["fps"]))),O.a),$e=function(t){return{filler:{flexGrow:1},bar:{position:"relative"},tabs:{margin:[[0,"auto"]]},title:{marginLeft:2*t.spacing.unit}}},Re=function(t){function e(){var t,n,r,i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return r=this,i=(t=_e(e)).call.apply(t,[this].concat(a)),n=!i||"object"!==ke(i)&&"function"!=typeof i?Ce(r):i,Te(Ce(n),"state",{filter:"",list:[],stats:new Map,tabIndex:0}),Te(Ce(n),"fetchAll",function(){Object(B.e)().then(function(t){return n.setState(function(){return{list:t.map(function(t){return xe({amalgam:"".concat(t.host,"\0").concat(t.id).concat(t.displayName).toLowerCase()},t)})}}),t},n.fetchCams).then(c()([k()(d()("videoStreams")),v()(d()("accessPoint"))])).then(F.b).then(c()([d()("data"),j.a,v()(function(t){var e=Se(t,2),n=e[0],r=e[1];return xe({},Le(r),{accessPoint:n})}),p()(function(t){var e=t.accessPoint;return Object(B.l)(e)}),n.updateStats]))}),Te(Ce(n),"updateStats",function(t){n.setState(function(){return{stats:new Map(y()(t))}});var e=Me(t),r=Ie/e*U.h;setTimeout(n.fetchAll,r)}),Te(Ce(n),"updateFilter",function(t){var e=t.target.value;n.setState(function(){return{filter:e.toLowerCase()}})}),Te(Ce(n),"handleTabChange",function(t,e){n.setState({tabIndex:e})}),n}var n,r,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ee(t,e)}(e,t),n=e,r=[{key:"componentDidMount",value:function(){this.fetchAll()}},{key:"render",value:function(){var t=this.props.classes,e=this.state,n=e.filter,r=e.list,a=e.stats,s=e.tabIndex,u=c()([l()(function(t){var e=t.amalgam;return e.includes(n)}),De])(r);return i.a.createElement("div",{className:"container"},i.a.createElement(P.a,{elevation:0,className:t.bar},i.a.createElement(T.a,null,i.a.createElement(C.a,{variant:"outlined",onClick:H.l},i.a.createElement(o.a,{id:Y.a.locale.back})),i.a.createElement($.a,{className:t.title,variant:"title"},i.a.createElement(o.a,{id:Y.a.locale.statistics.title})),!s&&i.a.createElement(Ut,{onChange:this.updateFilter}),i.a.createElement(oe,null))),i.a.createElement(P.a,{position:"static",color:"default"},i.a.createElement(D.a,{value:s,onChange:this.handleTabChange,className:t.tabs},i.a.createElement(I.a,{label:"Cameras"}),i.a.createElement(I.a,{label:"Archives"}))),i.a.createElement("div",{className:"stat_list"},0===s?i.a.createElement($t,{hosts:u,stats:a}):i.a.createElement(we,{listByHost:u,stats:a})))}}],r&&je(n.prototype,r),a&&je(n,a),e}(r.Component);Object(z.d)().then(function(){var t=Object(R.withStyles)($e)(Re),e=Object(N.b)(Y.a.locale),n=i.a.createElement(o.c,{messages:e,locale:V.b},i.a.createElement(R.MuiThemeProvider,{theme:Ae},i.a.createElement(t,null))),r=document.querySelector("div");r&&Object(a.render)(n,r)})},171:function(t,e,n){"use strict";n.d(e,"b",function(){return G});var r=n(1),i=n(8),o=n(293),a=n.n(o),s=n(294),c=n.n(s),u=n(295),l=n.n(u),h=n(296),d=n.n(h),f=n(297),p=n.n(f),m=n(298),v=n.n(m),b=n(299),y=n.n(b),g=n(300),O=n.n(g),w=n(301),k=n.n(w),S=n(302),j=n.n(S),_=n(303),C=n.n(_),E=n(304),P=n.n(E),x=n(305),T=n.n(x),A=n(306),I=n.n(A),L=n(307),D=n.n(L),M=n(308),$=n.n(M),R=n(309),F=n.n(R),N=n(310),z=n.n(N),B=n(311),V=n.n(B),H=n(312),U=n.n(H);function Y(t){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Y(t)}function q(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function W(t,e){for(var n=W.lang.length,i=!0,o={};n--&&i;)-1!==W.lang[n].langCode.indexOf(t)&&(i=!1,n+=1);for(var a in-1===n&&(n=1),W.loc)W.loc.hasOwnProperty(a)&&(o[a]=W.loc[a][n]);function s(t,e){Object(r.a)(e).find("resources").children().each(function(){var e=Object(r.a)(this),n=e.attr("name").split("-"),i=t;n.forEach(function(t,e,n,r){function o(t,e){return"array"===t?Array.isArray(e):Y(e)===t}if(t===r)if(o("string",n))void 0===i[n]&&(i[n]=e);else{if(!o("number",n))throw TypeError;o("array",i)?void 0===i[n]&&(i[n]=e):(i=[],i[n]=e)}else{if(!o("string",n))throw TypeError;n in i||(i[n]={}),i=i[n]}}.bind(void 0,n.length-1,e.text()))})}var c={},u="".concat("locale/","strings-").concat(t,".xml"),l="".concat("locale/","strings.xml");return r.a.get(u,s.bind(void 0,c)).always(function(){r.a.get(l,s.bind(void 0,c)).always(function(){e(c)})}),o}function G(t){var e={};return function t(e,n,r){for(var i in n)if(n.hasOwnProperty(i)){var o=i,a=n[i];e.length>0&&(o="".concat(e,".").concat(i)),"object"===Y(a)?t(o,a,r):r[o]=a}}("",t,e),e}Object(i.d)([].concat(q(a.a),q(c.a),q(l.a),q(d.a),q(p.a),q(v.a),q(y.a),q(O.a),q(k.a),q(j.a),q(C.a),q(P.a),q(T.a),q(I.a),q(D.a),q($.a),q(F.a),q(z.a),q(V.a),q(U.a))),W.lang=[{langCode:["ru","ru-RU"],langName:"Русский"},{langCode:["en","en-US"],langName:"English"}],W.loc={enter:["Войти","Enter"],find:["Имя камеры","Cameras name"],findTitle:["Поиск по имени: ","Search by Name: "],live:["Живой","Live"],archive:["Архив","Archive"],edit:["Редавтировать","Edit"],presets:["Предустановки","Presets"],ptzControl:["Управление PTZ","PTZ control"],calendar:[{closeText:"Установить",timeOnlyTitle:"Выберите время",timeText:"Время",hourText:"Часы",minuteText:"Мин.",secondText:"Сек.",millisecText:"Миллисекунды",timezoneText:"Часовой пояс",currentText:"Сейчас",dateFormate:"dd/mm/yy",dayNames:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],dayNamesMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],dayNamesShort:["Вос","Пон","Втр","Срд","Чтв","Пят","Суб"],monthNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthNamesShort:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Нояб","Дек"],nextText:"Следующий",prevText:"Предыдущий"},{closeText:"Set",currentText:"Today",dateFormate:"mm/dd/yy",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],nextText:"Next",prevText:"Prev"}],prevFrame:["Предыдущий кадр","Prev frame"],nextFrame:["Следующий кадр","Next frame"],prevInt:["Предыдущий интервал","Prev interval"],nextInt:["Следующий интервал","Next interval"],error:["Ошибка","Error:"],warn:["Предупреждение:","Warning:"],info:["Информация:","Info:"],escapePress:["Нажат Esc, возможно не все объекты загрузились, пожалуйста повторите попытку.","Pressed Esc, maybe not all objects are loaded, please try again."],running:["Запуск клиента ITV","Running ITV client"],logged:["Выполнен вход","Logged"],notAllPresetsRecieved:["Не все предустановки получены, пожалуйста повторите попытку","Not all presets received, please try again"],notAllDegreesRecieved:["Не все степени свободы получены, пожалуйста повторите попытку","Not all degrees of freedom are obtained, please try again"],notTelemetryRecieved:["Не получено устройство телеметрии, пожалуйста повторите попытку","Not received telemetry device, please try again"],timeoutException:["Сервер удержал соединение выше таймаута. Возможно команда не выполнена, пожалуйста повторите попытку.","The server connection is kept above the timeout. Perhaps the team failed, please try again."],notGetArchive:["Не удалось получить архив, пожалуйста повторите попытку.","Could not get archive, please try again."],cameraNotFound:["Камера не найдена:","Camera not found:"],notGetUUID:["Не получен UUID","Do not get the UUID"],archiveNotFound:[" Позиционирование на архив невозможно.","Positioning of the archive is not possible."],cameraWithNameNotFound:["Камера с таким именем не найдена:","Unable to find specified camera:"],choseDate:["Выбрать дату","Select date"],badDate:["Архив не найден на данную дату: ","Archive not found: "]},e.a=W},173:function(t,e,n){"use strict";n.d(e,"a",function(){return y}),n.d(e,"b",function(){return g});var r=n(150),i=n.n(r),o=n(281),a=n.n(o),s=n(3),c=n.n(s),u=n(88),l=n.n(u),h=n(23);function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var p={},m=l.a,v=l.a,b=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),f(this,"key",void 0),f(this,"handlers",void 0),f(this,"mustFireCount",void 0),f(this,"unsubscribe",void 0),this.key=e,this.handlers=[],this.mustFireCount=0}var e,n,r;return e=t,n=[{key:"observe",value:function(t){if("function"!=typeof t)throw new Error("No handler provided");this.handlers.push(t);var e=this.get();return e&&t(e),this}},{key:"unobserve",value:function(t){var e=this.handlers.findIndex(function(e){return e===t});return-1!==e&&this.handlers.splice(e,1),this}},{key:"put",value:function(t,e){return e&&(this.mustFireCount=this.handlers.length),v(Object(h.e)(this.key,t)),this}},{key:"assign",value:function(t){var e=this.get(),n=i()(e,t);return this.mustFireCount=this.handlers.length,v(Object(h.e)(this.key,n)),this}},{key:"get",value:function(){return m(this.key).val}},{key:"getPromise",value:function(){return Promise.resolve(this.value)}},{key:"notifyHandlers",value:function(){var t=m(this.key),e=t.val,n=t.old,r=this.mustFireCount>0;(e!==n||r)&&this.handlers.forEach(function(t){return t(e,n)})}}],n&&d(e.prototype,n),r&&d(e,r),t}();function y(t){return p[t]||(p[t]=new b(t)),p[t]}function g(t){return m=function(e){var n=t.getState();return{val:c()(["topic",e],n),old:c()(["topic",Object(h.d)(e)],n)}},v=t.dispatch.bind(t),y.dump=function(){return{values:t.getState().topic,topics:p}},function(t){return function(e){var n=e.type,r=e.payload,i=Object(h.b)(n)?Object(h.c)(n):"";i&&y(i)&&a()(function(){return p[i].notifyHandlers(r)}),t(e)}}}},174:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(t){return function(e){2===e.button&&t(e)}}},207:function(t,e,n){"use strict";var r=n(1);n(331);r.a.widget("app.fscreen",{options:{target:Object(r.a)()},defaultElement:"<div>",_create:function(){var t=this,e=Object(r.a)("<label>").addClass("fscreen"),n=Object(r.a)("<div>").addClass("fscreen__full fscreen__state"),i=Object(r.a)("<div>").addClass("fscreen__norm fscreen__state"),o=Object(r.a)("<span>").addClass("fscreen__arrow"),a=Object(r.a)("<input>").addClass("fscreen__chk").attr({type:"checkbox",hidden:!0});e.append(a).append(o).append(n).append(i),this.element.append(e).on({change:function(){Object(r.a)(this.options.target).fullScreen(a.prop("checked"))}.bind(this)}),Object(r.a)(document).on({fullscreenchange:function(){var e=t.options.target,n=e.get(0),r=e.fullScreen(),i=n===r;e.toggleClass("VideoCell--fullscreen",i),a.prop("checked",i)}})}})},209:function(t,e,n){},23:function(t,e,n){"use strict";n.d(e,"e",function(){return i});var r=n(100);n.d(e,"a",function(){return r.a}),n.d(e,"b",function(){return r.b}),n.d(e,"c",function(){return r.c}),n.d(e,"d",function(){return r.d});var i=function(t,e){return{type:Object(r.a)(t),payload:e}}},242:function(t,e,n){"use strict";var r=n(1),i=n(111),o=n.n(i),a=n(11),s=n(16),c=n(5),u=n(4),l=n(13);n(334);function h(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function d(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}r.a.widget("app.exportMgr",{options:{pollInterval:5e3},exportState:{PENDING:1,DONE:2,FAILED:3,NOSPACE:4},exportClass:{1:"export-task--pending",2:"export-task--done",3:"export-task--error",4:"export-task--error"},_create:function(){var t=this,e=Object(r.a)("<div>").addClass("export-task__button-bar"),n=Object(r.a)("<button>").addClass("export-task__button export-task__button-prev"),i=Object(r.a)("<button>").addClass("export-task__button export-task__button-next"),o=Object(r.a)("<button>").addClass("export-task__button export-task__button-stop"),a=Object(r.a)("<button>").addClass(["export-task__button","export-task__button-stop","export-task__button-stop--all"].join(" ")),s=Object(r.a)("<span>").addClass("export-task__progress"),c=Object(r.a)("<span>").addClass("export-task__caption"),u=Object(r.a)("<ul>").addClass("export-task__links"),l=Object(r.a)("<span>"),h=this.element.addClass("export-task");return h.append(c).append(c).append(s).append(u).append(e),e.append(o).append(n).append(l).append(i).append(a),n.on({click:function(){var e=t.tasks.length,n=t.idx,r=(n+e-1)%e;t.renderTask(r)}}),i.on({click:function(){var e=t.tasks.length,n=t.idx,r=(n+1)%e;t.renderTask(r)}}),o.on({click:function(){var e;t.stopTask(t.idx),e=Math.min(t.idx,t.tasks.length-1),t.renderTask(e)}}),a.on({click:this.stopAllTasks.bind(this)}),this.$task=h,this.$progress=s,this.$caption=c,this.$links=u,this.$index=l,this},addTask:function(t,e,n,r){var i,o=this,h=Object.create(null),d=this.exportState;h.caption="".concat(t.id," ").concat(t.name," ").concat(Object(s.e)(e)," +").concat(Object(s.f)(n-e)),h.state=d.PENDING,u.a.export("Exporting","from",e,"to",n);var f=t.isLive,p=t.activeSource,m=t.archiveDesc,v=void 0===m?{}:m,b=v.accessPoint,y=v.storage;h.postXhr=a.K({isLive:f,vsid:f?p:b,archive:y,begintime:e===c.g?"past":e,endtime:n===c.g?"future":n,extended:r}),h.postXhr.then(function(t){var e=t.jqXhr;h.location=Object(l.h)(e),u.a.export("Export at",h.location)},function(){u.a.export("Export post","failed"),h.state=d.FAILED,o.renderTask(i)}),i=this.tasks.push(h)-1,this.statusQueue.push(i),this.renderTask(i),this.pollStatus()},tasks:[],idx:-1,getStatus:function(t){var e=this,n=r.a.ajax.prototype;return n=a.p({location:this.tasks[t].location}),this.tasks[t].statusXhr=n,n.then(function(n){var i=n.data;return u.a.export("Export status",i.id,i.progress,i.state,i.error),e.tasks[t]=r.a.extend(e.tasks[t],i),i.state===e.exportState.PENDING&&e.statusQueue.push(t),{idx:t,state:i.state}},function(){return e.statusQueue.push(t),{idx:-1,state:e.exportState.PENDING}})},statusTimerId:0,statusQueue:[],pollStatus:function(){var t=this;this.statusTimerId=setTimeout(function(){var e="";t.statusQueue.length>0&&(e=t.statusQueue.shift(),t.getStatus(e).then(function(e){e.state===t.exportState.PENDING&&e.idx!==t.idx||t.renderTask(e.idx),t.pollStatus()}))},this.options.pollInterval)},renderTask:function(t){var e;if(this.idx=t,-1!==t){var n=this.tasks[t],i=o()(n.files,n.filesFriendly).map(function(t){var e=d(t,2),i=e[0],o=e[1],s=Object(r.a)("<li>"),c=Object(r.a)("<a>").addClass("export-task__links-item").attr({download:o,href:a.W({location:n.location,file:i})}).text(o);return s.append(c)});this.$caption.text(n.caption),this.$progress.text(n.progress?Math.floor(100*n.progress):0),this.$task.attr({class:"export-task export-task--active"}).addClass(this.exportClass[n.state]),this.$links.empty(),(e=this.$links).append.apply(e,h(i)),this.$index.text([t+1,this.tasks.length].join("/"))}else this.$task.removeClass(["export-task--active","export-task--done"])},stopTask:function(t){var e=this.tasks.splice(t,1)[0];e.postXhr&&e.postXhr.abort(),this.statusQueue=this.statusQueue.filter(function(e){return e!==t}),e.statusXhr&&e.statusXhr.abort(),a.S({location:e.location}),u.a.export("Export clear",e.location)},stopAllTasks:function(){for(var t=this.tasks.length-1;t>=0;t-=1)this.stopTask(t);this.$task.removeClass(["export-task--active","export-task--done"]),this.idx=-1},_destroy:function(){this.stopAllTasks(),this.element.removeAttr("class").empty()}})},243:function(t,e,n){},244:function(t,e){t.exports='<svg class="Playback__icon" viewBox="0 0 19 13"><g><polygon points="7,6.5 13.8,13 13.8,0"></polygon><polygon points="0.2,6.5 7,13 7,0"></polygon><rect x="17" y="0" width="2" height="13"></rect></g></svg>'},245:function(t,e){t.exports='<svg class="Playback__icon" viewBox="0 0 13 13"><g><polygon points="0,6.5 6.8,13 6.8,0"></polygon><rect x="10" y="0" width="2" height="13"></rect></g></svg>'},246:function(t,e){t.exports='<svg class="Playback__icon" viewBox="0 0 13 13"><g><polygon points="12,6.5 5.2,13 5.2,0 "></polygon><rect x="0" y="0" width="2" height="13"></rect></g></svg>'},247:function(t,e){t.exports='<svg class="Playback__icon" viewBox="0 0 19 13"><g><polygon points="12.2,6.5 5.3,13 5.3,0 "></polygon><polygon points="19,6.5 12.2,13 12.2,0 "></polygon><rect x="0" y="0" width="2" height="13"></rect></g></svg>'},248:function(t,e,n){},25:function(t,e,n){"use strict";n.d(e,"c",function(){return r}),n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r="common/CAM_SELECT",i={ARCH:"arch",LIVE:"live",ARCH_SEARCH:"search",LAYOUT_EDITOR:"layoutEditor"},o=16/9},27:function(t,e,n){"use strict";n.d(e,"h",function(){return X}),n.d(e,"l",function(){return Z}),n.d(e,"o",function(){return Q}),n.d(e,"f",function(){return tt}),n.d(e,"g",function(){return et}),n.d(e,"k",function(){return it}),n.d(e,"e",function(){return ut}),n.d(e,"c",function(){return lt}),n.d(e,"n",function(){return dt}),n.d(e,"a",function(){return ft}),n.d(e,"b",function(){return pt}),n.d(e,"p",function(){return vt}),n.d(e,"j",function(){return bt}),n.d(e,"i",function(){return yt}),n.d(e,"m",function(){return gt}),n.d(e,"d",function(){return Ot});var r,i=n(285),o=n.n(i),a=n(6),s=n.n(a),c=n(32),u=n.n(c),l=n(108),h=n.n(l),d=n(3),f=n.n(d),p=n(24),m=n.n(p),v=n(84),b=n.n(v),y=n(127),g=n.n(y),O=n(42),w=n.n(O),k=n(21),S=n.n(k),j=n(158),_=n.n(j),C=n(85),E=n.n(C),P=n(7),x=n.n(P),T=n(92),A=n.n(T),I=n(70),L=n.n(I),D=n(56),M=n.n(D),$=n(159),R=n.n($),F=n(43),N=n(11),z=n(136),B=n(95),V=n(73),H=n(93),U=n(5);function Y(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function q(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function W(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?q(n,!0).forEach(function(e){G(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):q(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function G(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var X=s()(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t.match(/^(hosts\/)?([^/]+)/)},f()(2)),K=M()(/[^/]*$/,""),Z=M()(/:\d{1,}$/,""),J=M()(/video:\d+/,"video:1"),Q=/DeviceIpint\.(.+)\/SourceEndpoint\.video:(\d+):(\d+)/;function tt(t){var e=Q.exec(t);return e?[e[1],e[2]]:[]}function et(t){return"0"===t[1]?t[0]:t.join(".")}var nt=f()("videoStreams[0].accessPoint"),rt=f()("origin"),it=s()([f()("videoStreams"),E.a,f()("accessPoint")]),ot=s()([f()("videoStreams.length"),b.a.convert({rearg:!0})(0)]);var at=x()(L()("accessPoint"));var st=f()(["data","nextPageToken"]),ct=s()([f()(["data","cameras"]),x()(function(t){var e=t;return ot(t)||(e.videoStreams=at(t.archives)),e}),u()(ot),_()(nt),x.a.convert({cap:!1})(function(t,e,n){var r=nt(t),i=tt(r),o="0"===i[1],a=g()(J(r),n);return W({dev:K(r),host:X(r),id:o&&!a?i[0]:i.join("."),channel:Z(r),origin:r},t)})]);function ut(t,e){var n=[],r=N.i({filter:t,limit:e}),i=[],a=Object(V.b)(),c=a.promise,u=a.resolve,l=a.reject,h={abort:function(){r.abort()},progress:function(t){return"function"==typeof t&&i.push(t),this},then:function(t,e){return this.promise=this.promise.then(t,e),this},promise:c};return r.then(function a(c){var l=st(c);return n=o()(n)(ct(c)),s()(i)(n),l?(r=N.i({filter:t,limit:e,next:l}),r.then(a,w.a),h.abort=r.abort,h):(u(n),n)},function(t){return l(t),t}),h}var lt=A()(function(t){return N.i({filter:t}).then(ct)});lt.cache=new z.a(U.d);var ht=m()(0,"streamType"),dt=s()(f()(["data"]),h.a,x()(function(t){var e=Y(t,2),n=e[0],r=e[1];return W({format:Object(B.b)(ht(r)),accessPoint:n},r)}),u()(f()("streamType"))),ft="ALPHABET",pt="ID",mt=(r={},G(r,ft,function(t){return Object(H.c)(["displayName","id"],[H.a,H.b],t)}),G(r,pt,function(t){return Object(H.c)(["id"],[H.b],t)}),r),vt=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pt;return s()([mt[e],t?R.a:w.a])},bt=f()("ptzs[0].accessPoint"),yt=f()("ptzs[0]"),gt=(s()(yt,L()(["move","zoom"])),function(t,e){return S()(rt(t),rt(e))}),Ot=x()(function(t){return W({format:F.b.MJPG},t)})},275:function(t,e,n){"use strict";var r=n(1),i=n(151),o=n.n(i),a=n(3),s=n.n(a),c=n(24),u=n.n(c),l=n(97),h=n.n(l),d=n(21),f=n.n(d),p=n(92),m=n.n(p),v=n(121),b=n.n(v),y=n(9),g=n(115),O=n(44);function w(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function k(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var S=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),k(this,"handleLoad",void 0),k(this,"handleError",void 0),k(this,"handleLoad",Function.prototype),k(this,"handleError",Function.prototype),k(this,"handleStop",Function.prototype)}var e,n,r;return e=t,n=[{key:"clean",value:function(){}},{key:"play",value:function(){}},{key:"stop",value:function(){}},{key:"push",value:function(){}},{key:"stats",value:function(){}},{key:"setAudio",value:function(){}},{key:"getImageData",value:function(){return O.d}},{key:"getImageInfo",value:function(){return{}}}],n&&w(e.prototype,n),r&&w(e,r),t}(),j=S,_=n(40),C=n.n(_),E=n(188),P=n.n(E),x=n(4),T=8;function A(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=0,i=0;i<t;i+=1)r+=e[n+i]<<(t-1-i)*T;return r}function I(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return t[n+(e=r,e/T|0)]>>T-1-r%T&1}function L(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var D={tags:[null,null,null,"ES_DescrTag","DecoderConfigDescrTag","DecoderSpecificInfo"],DecoderSpecificInfo:function(t){var e={};return e.objectType=t[1]>>3,e},DecoderConfigDescrTag:function(t){var e={},n=1;e.objectTypeIndication=t[n++],e.streamType=127&t[n],e.upStream=2&t[n++],e.bufferSizeDB=A(3,t,n+=3),e.maxBitrate=A(4,t,n),n+=4,e.avgBitrate=A(4,t,n),n+=4;var r=this.tags[t[n++]],i=M(t,n);return this[r]&&(e[r]=this[r](i)),e},ES_DescrTag:function(t){var e={},n=1;e.ES_ID=A(2,t,n),n+=2,e.streamDependenceFlag=256&t[n],e.URL_Flag=128&t[n],e.OCRstreamFlag=64&t[n],e.streamPriority=63&t[n],n+=1,e.streamDependenceFlag&&(e.dependsOn_ES_ID=A(2,t,n),n+=2),e.URL_Flag&&(e.URLlength=t[n++],e.URLstring=t.subarray(n,n+=e.URLlength)),e.OCRstreamFlag&&(e.OCR_ES_Id=A(2,t,n),n+=2);var r=this.tags[t[n++]],i=M(t,n);return this[r]&&(e[r]=this[r](i)),e}};function M(t,e){var n=function(t,e){for(var n=e,r=128&t[n],i=127&t[n],o=i;r;)r=128&t[++n],i=127&t[n],o=o<<7|i;return[n,o]}(t,e),r=L(n,2),i=r[0],o=r[1];return t.subarray(i,i+o)}var $=function(t){var e={},n=0;e.version=t[n++],e.flags=t.subarray(n,n+=3);var r=D.tags[t[n++]],i=M(t,n);return D[r]&&(e[r]=D[r](i)),e},R=n(16),F=["n/s","nonIDR","partA","partB","partC","IDR","SEI","SPS","PPS","AUD","EOSq","EOS","FD"],N=["I","I P","I P B","SI","SI SP","I SI","I SI P SP","I SI P SP B"],z=["P","B","I","SP","SI","P","B","I","SP","SI"];function B(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e%T,r=e-n,i=(e-n)/T,o=-1,a=n,s=0;!s;a+=1,o+=1)s=I(t,i,a);for(var c=(1<<o)-1,u=0;u<o;u+=1){var l=I(t,i,a+u);c+=l<<o-u-1}return{codeNum:c,offsetBits:r+a+o}}function V(t){for(var e=0,n=0,r=[];e+4<=t.byteLength;){if(n=A(4,t,e),n<0||n>t.byteLength)return r.push("invalid NALU"),r;e+=4;var i=31&t[e];switch(i){case 1:var o=B(t,(e+1)*T),a=o.offsetBits,s=B(t,a),c=s.codeNum;r.push(z[c]?z[c]:c);break;case 5:r.push(F[i]);break;case 6:break;case 9:var u=(286261248&t[e+1])>>5;r.push(N[u])}e+=n}return r}function H(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var U=new Uint8Array([109,100,97,116]),Y=new Uint8Array([97,118,99,67]),q=new Uint8Array([104,118,99,67]),W=new Uint8Array([101,115,100,115]),G=new Uint8Array([116,102,100,116]),X=4,K=4,Z=Math.pow(2,32),J=4,Q=8;function tt(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=!1,i=n;i<t.byteLength-e.length;i++){r=!0;for(var o=0;o<e.length;o++)if(t[i+o]!=e[o]){r=!1;break}if(r)return i-X}return-1}function et(t){var e=function(t){var e=tt(t,Y);if(-1===e)return"";e+=X+K;var n=t[e++],r=Object(R.j)(t.subarray(e,e+3));return"avc".concat(n,".").concat(r)}(t)||function(t){var e=tt(t,q);if(e<0)return"";e+=X+K;var n=t[e++],r=(192&t[e])>>6,i=["","A","B","C"][r],o=(32&t[e])>>5,a=["L","H"][o],s=31&t[e++],c=Object(R.m)(H(t.subarray(e,e+=4))),u=Object(R.k)(t.subarray(e,e+=6)),l=t[e];return"hvc".concat(n)+".".concat(i).concat(s)+".".concat(c)+".".concat(a).concat(l)+".".concat(u)}(t),n=function(t){var e=tt(t,W);if(e<0)return"";var n=e+K+X,r=t.subarray(n,e+A(X,t,e)),i=$(r),o=i.ES_DescrTag.DecoderConfigDescrTag,a=o.objectTypeIndication,s=o.DecoderSpecificInfo.objectType,c="mp4a.".concat(a.toString(16),".").concat(s);return c}(t),r=[],i=!1,o=!1;return e&&(i=!0,r.push(e)),n&&(o=!0,r.push(n)),{hasVideo:i,hasAudio:o,mime:'video/mp4; codecs="'.concat(r.join(),'"')}}function nt(t){for(var e=[],n=0,r=tt(t,U);-1!==r;){var i=A(4,t,r),o=r+X+K,a=o+i;e.push(V(t.subarray(o,a))),n=a,r=tt(t,U,n)}return e.join("\n")}var rt=n(5);function it(t){return it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},it(t)}function ot(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function at(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function st(t){return st=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},st(t)}function ct(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ut(t,e){return ut=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},ut(t,e)}function lt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ht="n/a",dt="stalled",ft="waiting",pt="no buffer",mt="in progress",vt="playing",bt="paused",yt="seek",gt=rt.i,Ot={leading:!0,trailing:!1},wt=function(t){return C()(.5,16,P()((e=t,e+Math.pow(e,3)+1),1));var e};var kt=function(t){function e(t,n){var i,o,a,s=n.handleLoad,c=n.handleError,u=n.handleStop;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o=this,a=st(e).call(this),i=!a||"object"!==it(a)&&"function"!=typeof a?ct(o):a,lt(ct(i),"buffer",void 0),lt(ct(i),"bufDiff",void 0),lt(ct(i),"pendingPlay",void 0),lt(ct(i),"remote0",void 0),lt(ct(i),"remoteT",void 0),lt(ct(i),"local0",void 0),lt(ct(i),"mse",void 0),lt(ct(i),"queue",void 0),lt(ct(i),"$videoTag",void 0),lt(ct(i),"video",void 0),lt(ct(i),"handleData",void 0),lt(ct(i),"codec",void 0),lt(ct(i),"bdmt",void 0),lt(ct(i),"state",void 0),x.a.video("videoCell","MSE player"),i.handleLoad=s,i.handleError=c,i.handleStop=u,i.bufDiff=0,i.pendingPlay=null,i.initBuffer=i.initBuffer.bind(ct(i)),i.consume=i.consume.bind(ct(i)),i.correctRate=b()(i.correctRate.bind(ct(i)),rt.h),i.free=b()(i.free.bind(ct(i)),gt,Ot),i.mse=new MediaSource,i.queue=[],i.codec="…",i.bdmt=-1,i.state=ht,i.$videoTag=Object(r.a)("<video>").addClass("VideoCell__video").attr({src:URL.createObjectURL(i.mse)}).one({error:function(t){x.a.video("mse error %s\n%o",i.video.error,t),i.handleError(i.video.error)}}).on({stalled:function(){i.state=dt,x.a.video("mse %cstalled","color: crimson")},waiting:function(){i.state=ft,x.a.video("mse %cwaiting","color: orange")},play:function(){return i.handleLoad()},playing:function(){i.state=vt},paused:function(){i.state=bt},progress:function(t){var e=t.target,n=e;if(0===n.buffered.length)return i.state=pt,void(i.video.currentTime=0);i.state=mt;var r=n.buffered.start(n.buffered.length-1),o=n.buffered.end(n.buffered.length-1);if(!i.pendingPlay&&n.paused&&(i.pendingPlay=n.play(),i.pendingPlay)){var a=function(){i.pendingPlay=null};i.pendingPlay.then(a,a)}!n.paused&&(r>n.currentTime||n.currentTime>o)&&(i.state=yt,n.currentTime=o,x.a.video("mse seek to last TimeRange (%d)",n.buffered.length))}}).appendTo(t);var l=ot(i.$videoTag,1);return i.video=l[0],i.video.muted=!0,i.video.controls=!1,i.video.preload="none",i.handleData=i.initBuffer,i}var n,i,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ut(t,e)}(e,t),n=e,i=[{key:"getImageInfo",value:function(){return{width:this.video.videoWidth,height:this.video.videoHeight}}},{key:"start",value:function(){var t=this.remoteT-this.remote0,e=this.video.buffered,n=e.length-1;e.length>0&&(this.video.currentTime=e.start(n)+t,this.video.play(),x.a.video("mse start playing (at %fs)",this.video.currentTime),this.buffer.removeEventListener("updateend",this.start),this.remote0=this.remoteT)}},{key:"consume",value:function(){if(!this.buffer.updating){var t=this.queue[0];if(t){var e=this.bdmt;if(this.bdmt=function(t){var e=-1,n=tt(t,G);if(-1!==n){n+=X+K;var r=t.slice(n,n+Q),i=new DataView(r.buffer);e=i.getUint32(0)*Z+i.getUint32(J)}return e}(new Uint8Array(t.payload)),this.bdmt<e&&0===this.bdmt)this.buffer.remove(0,1/0);else{try{this.buffer.appendBuffer(t.payload)}catch(t){x.a.video("mse error %s\n%o",this.video.error,t),this.handleError(this.video.error)}this.queue.shift()}}}}},{key:"free",value:function(){if(this.video&&!this.video.paused&&!this.buffer.updating){var t=this.video.played.end(0)-8;t<0||this.buffer.remove(0,t)}}},{key:"initBuffer",value:function(){var t,e=this,n=this.queue,r={};do{var i=ot(n,1);t=i[0];var o=new Uint8Array(t.payload);if(r=et(o),r.hasVideo){x.a.video("mse","NALU",nt(o));break}n.shift()}while(n.length>0);if(!r.hasVideo)return x.a.video("mse %cno moov","font: bold; color: red"),void this.handleError("no moov");r.hasAudio&&this.$videoTag.trigger({type:"audioTrack"}),this.remote0=Object(rt.p)(t.pts);var a,s,c;a="open"===this.mse.readyState,s=function(){x.a.video("videoCell","mse",r.mime),e.buffer=e.mse.addSourceBuffer(r.mime),e.buffer.mode="segments",e.buffer.addEventListener("update",e.consume),e.codec=r.mime,e.handleData=e.consume},c=this.mse.addEventListener.bind(this.mse,"sourceopen"),a?s():c(s)}},{key:"stop",value:function(){this.video.pause(),this.queue.length=0}},{key:"push",value:function(t){this.queue.push(t),this.handleData()}},{key:"clean",value:function(){this.free.cancel(),this.handleStop(),URL.revokeObjectURL(this.video.src),this.$videoTag.remove(),this.mse=void 0,this.$videoTag=void 0,this.video=void 0}},{key:"setAudio",value:function(t){this.video.muted=t}},{key:"setVolume",value:function(t){this.video.volume=t}},{key:"getImageData",value:function(){return Object(O.f)(this.video)}},{key:"stats",value:function(){var t=this.queue.length,e=this.video.currentTime,n=this.remote0,r=this.remoteT,i=r-n,o=i-e,a=["","state\t".concat(this.state),"codec\t".concat(this.codec),"queue\t".concat(t," pkts")," bdmt\t".concat(this.bdmt),"   Δt\t".concat(Object(R.b)(o)," s"),"mse t\t".concat(Object(R.b)(e)," s")];if(this.buffer&&this.buffer.buffered.length>0){var s=this.buffer.buffered,c=this.bufferEnd;a.push("buf t\t".concat(Object(R.b)(s.start(0)),"…").concat(Object(R.b)(c)," s"))}return a.join("\n")}},{key:"correctRate",value:function(){if(this.video&&!this.video.paused&&0!==this.video.played.length&&0!==this.buffer.buffered.length){var t=this.video.currentTime,e=this.bufferEnd-t;this.video.playbackRate=wt(e-.1),this.bufDiff=e}}},{key:"bufferEnd",get:function(){var t=this.buffer.buffered;return t.end(t.length-1)}}],i&&at(n.prototype,i),o&&at(n,o),e}(j),St=kt,jt=n(292),_t=n.n(jt);function Ct(t){return Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ct(t)}function Et(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Pt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function xt(t){return xt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},xt(t)}function Tt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function At(t,e){return At=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},At(t,e)}function It(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Lt=function(t){function e(t,n){var i,o,a,s=n.handleLoad,c=n.handleError,u=n.handleStop;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o=this,a=xt(e).call(this),i=!a||"object"!==Ct(a)&&"function"!=typeof a?Tt(o):a,It(Tt(i),"blobFactory",void 0),It(Tt(i),"inPkt",void 0),It(Tt(i),"outPkt",void 0),It(Tt(i),"last",void 0),It(Tt(i),"key",void 0),It(Tt(i),"videoTag",void 0),It(Tt(i),"$videoTag",void 0),It(Tt(i),"queuedPkt",void 0),It(Tt(i),"oldUrl",void 0),It(Tt(i),"renderId",void 0),x.a.video("videoCell","IMG player"),i.handleLoad=s,i.handleError=c,i.handleStop=u,i.inPkt=0,i.outPkt=0,i.last=performance.now(),i.renderBlob=i.renderBlob.bind(Tt(i)),i.queueRender=i.queueRender.bind(Tt(i)),i.queuedPkt={payload:[]},i.loading=!1,i.$videoTag=Object(r.a)("<img>").addClass("VideoCell__video").one({load:s,error:c}),i.$helpImg=Object(r.a)("<img>").on({load:function(){URL.revokeObjectURL(i.oldUrl),i.loading=!1}});var l=Et(i.$helpImg,1);i.helpImg=l[0];var h=Et(i.$videoTag,1);return i.videoTag=h[0],t.append(i.$videoTag),_t()(i.$videoTag),i}var n,i,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&At(t,e)}(e,t),n=e,i=[{key:"getImageInfo",value:function(){return{width:this.videoTag.naturalWidth,height:this.videoTag.naturalHeight}}},{key:"queueRender",value:function(t){this.renderId||this.loading||(this.renderId=requestAnimationFrame(this.renderBlob)),this.queuedPkt=t}},{key:"renderBlob",value:function(){var t=URL.createObjectURL(new Blob([this.queuedPkt.payload],{type:"image/jpeg"}));this.oldUrl=this.helpImg.src,this.videoTag.src=t,this.helpImg.src=t,this.loading=!0,this.outPkt+=1,this.renderId=0}},{key:"push",value:function(t){this.key=t.key,this.inPkt+=1,this.queueRender(t)}},{key:"clean",value:function(){cancelAnimationFrame(this.renderId),this.handleStop(),URL.revokeObjectURL(this.videoTag.src),this.key=-1,this.$videoTag.remove(),this.$videoTag=null,this.videoTag=null}},{key:"getImageData",value:function(){return Object(O.f)(this.videoTag)}},{key:"stats",value:function(){var t=performance.now(),e=t-this.last,n=Math.floor(rt.h*this.inPkt/e),r=Math.floor(rt.h*this.outPkt/e);return this.inPkt=0,this.outPkt=0,this.last=t,"\n in ".concat(n," pkt/s\nout ").concat(r," pkt/s\n\t\t")}}],i&&Pt(n.prototype,i),o&&Pt(n,o),e}(j),Dt=Lt,Mt=n(25),$t=n(43),Rt=n(27),Ft=n(65),Nt=n(174),zt=n(13);n(333);r.a.widget("app.selectMode",{options:{},defaultElement:"<form>",_create:function(){var t=this,e=this.element,n=Object(r.a)("<label>").addClass("Mode-trigger__btn"),i=Object(r.a)("<input>").attr({type:"radio",name:"videoMode"}),o=Object(r.a)(this.iconLive).addClass("Mode-trigger__icon"),a=Object(r.a)(this.iconArch).addClass("Mode-trigger__icon"),s=Object(r.a)(this.iconSearch).addClass("Mode-trigger__icon"),c=i.clone().attr({value:"live",name:"mode"}).prop({checked:!0}).addClass("Mode-trigger__input_live"),u=i.clone().attr({value:"arch",name:"mode"}).addClass("Mode-trigger__input_arch"),l=i.clone().attr({value:"search",name:"mode"}).addClass("Mode-trigger__input_search"),h=n.clone().attr({title:y.a.locale.live}).addClass("Mode-trigger__btn_live").append(c).append(o),d=n.clone().attr({title:y.a.locale.archive}).addClass("Mode-trigger__btn_arch").append(u).append(a),f=n.clone().attr({title:y.a.locale.search}).addClass("Mode-trigger__btn_search").append(l).append(s);this.$arch=d,this.$search=f,this.$radioLive=c,this.$radioArch=u,this.$radioSearch=l,this.updateSelect=this.updateSelect.bind(this),e.append(h).append(d).append(f).appendTo(this.element).on({click:function(t){t.stopPropagation()},change:function(){var e=t.topic,n=t.getMode();e(e.key.APP_MODE).put(n)}}),this.element.addClass("Mode-trigger").append(e),this.topic(this.topic.key.APP_MODE).observe(this.updateSelect)},_destroy:function(){this.topic(this.topic.key.APP_MODE).unobserve(this.updateSelect),this.element.empty()},getMode:function(){return this.element.find(":checked").val()},disabled:function(t){t&&this.$radioLive.prop({checked:!0}),this.$radioArch.prop({disabled:t}),this.$arch.toggleClass("Mode-trigger--disabled",t),this.$radioSearch.prop({disabled:t}),this.$search.toggleClass("Mode-trigger--disabled",t)},updateSelect:function(t){switch(t){case Mt.a.ARCH_SEARCH:this.$radioSearch.prop({checked:!0});break;case Mt.a.ARCH:this.$radioArch.prop({checked:!0});break;case Mt.a.LIVE:this.$radioLive.prop({checked:!0})}},iconLive:'\n<svg viewBox="0 0 32 32">\n\t<rect x="3" y="5" width="26" height="18" />\n\t<rect x="6" y="7" width="20" height="14"\n\t\tstyle="fill: currentColor"\n\t/>\n\t<path d="m 13,23 v 4 0 h -4 10 5 -5 v -4"\n\t\tstyle="fill: currentColor"\n\t/>\n<svg>',iconArch:'\n<svg viewBox="0 0 32 32">\n\t<rect width="26" height="22" y="5" x="3" />\n\t<path d="m 12,18 v -2 c 0,0 0,-2 -2,-2 -2,0 -2,2 -2,2 0,0 0,2 2,2\n\t\th 12 c 2,0 2,-2 2,-2 0,0 0,-2 -2,-2 -2,0 -2,2 -2,2 v 2" />\n\t<path id="p1" d="M 8,10 V 5 m 5,0 v 5 m 5,0 V 5 m 5,0 v 5"></path>\n\t<use height="100%" width="100%" xlink:href="#p1" y="17" x="0" />\n\t<path d="m 3,10 h 26 m 0,12 H 3" />\n</svg>',iconSearch:'\n\t<svg viewBox="0 0 32 32">\n\t <g>\n\t  <circle fill-opacity="0" id="svg_1" r="8" cy="14" cx="14" stroke-width="2" style="stroke: currentColor" />\n\t  <line id="svg_4" y2="21" x2="21" y1="28" x1="28" fill-opacity="0" stroke-width="4" style="stroke: currentColor" />\n\t </g>\n\t</svg>\n\t'});var Bt=n(6),Vt=n.n(Bt);function Ht(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Ut=u()(0),Yt=Ut("width"),qt=Ut("height"),Wt=Vt()([Ut("bitrate"),R.l]);r.a.widget("app.selectStream",{options:{idx:-1},defaultElement:"<div>",_create:function(){this.update=this.update.bind(this),this.setStream=this.setStream.bind(this),this.toggleShow=this.toggleShow.bind(this),this.updateSelected=this.updateSelected.bind(this),this.topic(this.topic.key.CAM_ARCH).observe(this.toggleShow),this.$select=Object(r.a)("<select>").addClass("VideoCell-opts__selector").on("change",this.setStream),this.element.addClass("VideoCell-opts").append(this.$select)},setCamera:function(t){this.camera&&(this.camera.streams.unobserve(this.update),this.camera.streamActive.unobserve(this.updateSelected),this.camera=void 0,this.update([])),t&&(this.camera=t,t.streams.observe(this.update),this.camera.streamActive.observe(this.updateSelected))},setStream:function(t){var e=Number(t.target.value);this.camera.streamActive.put(e)},update:function(t){var e;if(this.camera){var n=r.a.map(t,function(t,e){return Object(r.a)("<option>").attr({value:e}).text("".concat(Yt(t),"⨯").concat(qt(t),"\t").concat(Wt(t)))});(e=this.$select.empty()).append.apply(e,Ht(n)),this.element.toggleClass("VideoCell-opts--active",Object(zt.j)(n))}else this.$select.empty()},updateSelected:function(t){this.$select.val(t)},toggleShow:function(t){this.element.toggleClass("hidden",Boolean(t))},_destroy:function(){}});n(242);r.a.widget("app.exportNow",{options:{camera:null},defaultElement:"<button>",_create:function(){this.exportServer=this.exportServer.bind(this),this.element.addClass("exportBtn").on({click:this.exportServer})},_destroy:function(){this.element.off({click:this.exportServer})},exportServer:function(){var t=this.options.camera,e=this.topic;if(!t)return x.a.export("no camera selected"),this;var n=e(e.key.ARCH_TIME).get(),r=t.isLive,i=r?new Date:n;return e(e.key.EXPORT_TASK).put([t,i,i,{format:"jpg"}]),this},exportCanvas:function(t){var e=Object(r.a)(t.target).parents(".VideoCell").find(".VideoCell__video").get(0),n=this.getImageCanvas(e),i=this.options.camera,o=i.id,a=i.name,s=Object(R.g)(new Date),c="".concat(o,".").concat(a,"-").concat(s,".png").replace(" ","_");window.navigator&&window.navigator.msSaveBlob?window.navigator.msSaveBlob(n.msToBlob(),c):this.saveImage(n.toDataURL("image/png"),c)},getImageCanvas:function(t){var e=document.createElement("canvas"),n=e.getContext("2d",{alpha:!1});return e.width=t.videoWidth||t.naturalWidth,e.height=t.videoHeight||t.naturalHeight,n.drawImage(t,0,0),e},saveImage:function(t,e){var n=Object(r.a)("<a>").attr({download:e,href:t}).appendTo(document.body);n.get(0).click(),n.remove()}});n(207);var Gt=n(48),Xt=n.n(Gt),Kt=n(254),Zt=n.n(Kt),Jt=n(88),Qt=n.n(Jt),te=n(145),ee=n.n(te),ne=n(196),re=n.n(ne);r.a.widget("app.zoombar",{options:{min:1,max:1},_create:function(){var t=this.options.min,e=this.options.max,n=Object(r.a)("<span>").text(t).addClass("zoom-bar__val"),i=Object(r.a)("<span>").text(e).addClass("zoom-bar__val");this.$resetButton=Object(r.a)("<button>").addClass("zoom-bar__reset ").addClass("ui-button ui-priority-primary").html("&orarr;"),this.$scale=Object(r.a)("<span>").addClass("zoom-bar__scale"),this.$indicator=Object(r.a)("<span>").addClass("zoom-bar__indicator"),this.$scale.append(this.$indicator),this.element.addClass("zoom-bar").append(n).append(this.$scale).append(i).append(this.$resetButton)},setValue:function(t){var e=this.options.min,n=this.options.max,r=this.$scale.width()/(n-e),i=r*(t-e);return this.$indicator.css({transform:"translateX(".concat(i,"px)")}),this},onReset:function(){return r.a.prototype.on.apply(this.$resetButton,arguments)},_destroy:function(){this.element.remove()}});n(335);function ie(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function oe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ie(n,!0).forEach(function(e){ae(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ie(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function ae(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}r.a.widget("app.zoomable",{options:{min:y.a.settings.zoomMin,max:y.a.settings.zoomMax,steps:y.a.settings.zoomSteps,delta:y.a.settings.zoomDelta},REF_SCALE:1,HALF_SCALE:.5,T_TIME:.1,NO_TRANSI:!0,NO_ZOOMABLE:Object(r.a)(),_init:function(){this.geom0={scale:this.options.min,x:0,y:0},this.drag0={x:0,y:0},this.dragS={},this.transition=!1,this.drag=this.drag.bind(this),this.dragBegin=this.dragBegin.bind(this),this.dragEnd=this.dragEnd.bind(this),this.dragInit=this.dragInit.bind(this),this.publishGeom=Qt.a,this.publishTopic=re()(rt.c,this.publishTopic.bind(this)),this.reset=this.reset.bind(this),this.togglePublish=this.togglePublish.bind(this),this.transitionStart=this.transitionStart.bind(this),this.transitionStop=this.transitionStop.bind(this),this.updateGeom=this.updateGeom.bind(this),this.zoom=ee()(this.zoom.bind(this),zt.p)},_create:function(){this._init(),this.element.wrapAll(Object(r.a)("<div>").addClass("zoom")),this.$container=this.element.parent(),this.zoomBar=r.a.app.zoombar(this.options),this.topic(this.topic.key.APP_MODE).observe(this.togglePublish),this.element.on({wheel:this.zoom,mousedown:this.dragInit,transitionend:this.transitionStop}),this.zoomBar.onReset({click:this.reset}),this.zoomBar.widget().insertAfter(this.$container),this.reset(this.NO_TRANSI)},updateGeom:function(t,e){e||this.transitionStart(),this.element.css({transform:this.makeTransform(t)}),this.zoomBar.setValue(t.scale),this.publishGeom(t)},publishTopic:function(t){this.topic(this.topic.key.ZOOM).put(oe({},t))},togglePublish:function(t){switch(t){case Mt.a.LIVE:this.publishGeom=Qt.a;break;case Mt.a.ARCH:case Mt.a.ARCH_SEARCH:this.publishGeom=this.publishTopic,this.reset(this.NO_TRANSI)}},dragged:function(t){return void 0!==t&&(this._dragged=Boolean(t)),this._dragged},reset:function(t){this.geom=Zt()(this.geom0),this.updateGeom(this.geom,t),this.$container.removeClass("zoom--transformed"),this.transitionStop(),this.publishGeom(this.geom0)},dragInit:function(t){t.preventDefault(t),this.dragged(!1),this.geom.scale>this.geom0.scale&&(this.dragBegin(t),Object(r.a)(window).on({mousemove:this.drag,mouseup:this.dragEnd,mouseleave:this.dragEnd}),this.$container.addClass("zoom--transformed"))},frameZoom:function(t){var e=this.element.get(0),n=e.offsetHeight,r=e.offsetWidth,i=this.$container.get(0),o=i.clientHeight,a=i.clientWidth,s=a/r,c=o/n,u=Math.abs((t.scale-s)/2),l=Math.abs((t.scale-c)/2);return oe({},t,{x:Xt()(t.x,-u,u),y:Xt()(t.y,-l,l)})},drag:function(t){this.dragged(!0);var e=this.element.get(0),n=e.offsetHeight,r=e.offsetWidth,i={x:this.geom.x+(t.pageX-this.dragS.x)/r,y:this.geom.y+(t.pageY-this.dragS.y)/n,scale:this.geom.scale};this.geom=this.frameZoom(i),this.dragBegin(t),this.updateGeom(this.geom,this.NO_TRANSI)},dragBegin:function(t){this.dragS.x=t.pageX,this.dragS.y=t.pageY},dragEnd:function(){Object(r.a)(window).off({mousemove:this.drag,mouseup:this.dragEnd,mouseleave:this.dragEnd})},fit:function(t){this.$container.css({flexDirection:t})},zoom:function(t){var e=this.options.min,n=this.options.max,r=this.options.delta,i=r*Math.sign(t.deltaY),o=this.geom.scale,a=o*(this.REF_SCALE+i);if(t.originalEvent.preventDefault(),!(this.transition||a>n))if(a<e)this.reset();else{var s=this.element.get(0).getBoundingClientRect(),c=(t.pageX-s.left)/s.width,u=(t.pageY-s.top)/s.height,l={x:this.geom.x+(a-o)*(this.HALF_SCALE-c),y:this.geom.y+(a-o)*(this.HALF_SCALE-u),scale:a};this.geom=this.frameZoom(l),this.updateGeom(this.geom),this.$container.addClass("zoom--transformed")}},transitionStart:function(){this.transition=!0,this.element.css({transition:"transform ".concat(this.T_TIME,"s")})},transitionStop:function(){this.transition=!1,this.element.css({transition:"transform ".concat(0,"s")})},_destroy:function(){this.reset(),this.zoomBar.destroy(),this.element.off().unwrap(this.$container)},makeTransform:function(t){var e=t.x,n=t.y,r=t.scale;return"translate(".concat(100*e,"%,").concat(100*n,"%) scale(").concat(r,")")}});n(336);r.a.widget("app.speaker",{option:{target:Object(r.a)()},defaultElement:"<div>",_create:function(){var t=this;this.setVolume=this.setVolume.bind(this),this.setAudio=this.setAudio.bind(this);this.$label=Object(r.a)("<label>").addClass("speaker");var e=Object(r.a)("<div>").addClass("speaker__volume");this.$check=Object(r.a)("<input>").addClass("speaker__chk").prop({type:"checkbox",checked:!1,hidden:!0}),this.$track=Object(r.a)("<div>").addClass("speaker__volume-track"),this.$progress=Object(r.a)("<div>").addClass("speaker__volume-progress"),this.$handle=Object(r.a)("<div>").addClass("speaker__volume-handle").draggable({axis:"y",containment:"parent",drag:function(e,n){t.setVolume(n.position.top)}}),this.$track.on({click:function(e){e.preventDefault(),e.stopPropagation();var n=Xt()(e.pageY-t.$track.offset().top,0,t.$track.height()-t.$handle.height());t.$handle.css({top:n}),t.setVolume(n)}}),this.$track.append(this.$handle).append(this.$progress),this.$label.append(this.$check).append(e.append(this.$track)),this.element.append(this.$label).on({change:this.setAudio,layoutHidden:function(){t.$check.prop({checked:!1}),t.setAudio()}}).hide()},setVolume:function(t){var e=this.$track.height()-t-this.$handle.height(),n=Xt()(1-t/this.$track.height(),0,1);this.$progress.css({height:"".concat(e,"px")}),this.options.setVolume(n)},setAudio:function(){this.options.setAudio&&this.options.setAudio(this.$check.prop("checked")),this.$label.toggleClass("speaker--with_sound",this.$check.prop("checked"))}});n(243);var se=n(337),ce=n(338),ue=n(339),le=n(340),he=n(244),de=n(245),fe=n(246),pe=n(247);r.a.widget("app.playbackPanel",{_create:function(){var t=this;this.handleSpeed=this.handleSpeed.bind(this),this.setCamera=this.setCamera.bind(this),this.show=this.show.bind(this),this.hide=this.hide.bind(this),this.$playPause=Object(r.a)("<div>").addClass("Playback__btn").on({click:function(){var e=t.topic(t.topic.key.ARCH_SPEED).get(),n=0===t.topic(t.topic.key.PLAYBACK).get().speed;t.topic(t.topic.key.PLAYBACK).assign({beginTime:t.topic(t.topic.key.ARCH_TIME).get(),speed:n?e:0}),n?t.$playPause.html(le):t.$playPause.html(ue),t.$previousFrame.toggleClass("hidden",n),t.$nextFrame.toggleClass("hidden",n),t.$incSpeed.toggleClass("hidden",!n),t.$decSpeed.toggleClass("hidden",!n)}}).append(ue),this.$nextFrame=Object(r.a)("<div>").addClass("Playback__btn").on({click:function(){return t.camera.stepForward()}}).append(fe),this.$nextFragment=Object(r.a)("<div>").addClass("Playback__btn").on({click:function(){return t.camera.nextInterval()}}).append(pe),this.$previousFrame=Object(r.a)("<div>").addClass("Playback__btn").on({click:function(){return t.camera.stepBack()}}).append(de),this.$previousFragment=Object(r.a)("<div>").addClass("Playback__btn").on({click:function(){return t.camera.prevInterval()}}).append(he),this.$incSpeed=Object(r.a)("<div>").addClass("Playback__btn hidden").on({click:function(){return t.handleSpeed(1)}}).append(se),this.$decSpeed=Object(r.a)("<div>").addClass("Playback__btn hidden").on({click:function(){return t.handleSpeed(-1)}}).append(ce),this.element.append(this.$previousFragment).append(this.$decSpeed).append(this.$previousFrame).append(this.$playPause).append(this.$nextFrame).append(this.$incSpeed).append(this.$nextFragment).addClass("hidden VideoCell__playback").on({dblclick:function(t){return t.stopPropagation()}})},handleSpeed:function(t){var e=y.a.settings.playspeed,n=this.topic(this.topic.key.ARCH_TIME).get(),r=this.topic(this.topic.key.ARCH_SPEED).get(),i=y.a.settings.playspeed.indexOf(r),o=C()(0,e.length-1,i+t),a=e[o];this.topic(this.topic.key.PLAYBACK).assign({speed:a,beginTime:n}),this.topic(this.topic.key.ARCH_SPEED).put(a)},setCamera:function(t){this.camera&&(this.camera=void 0),t&&(this.camera=t)},show:function(){this.element.removeClass("hidden")},hide:function(){this.element.addClass("hidden")}});n(341);r.a.widget("app.timeCell",{_create:function(){var t=this;this.handleCLick=this.handleCLick.bind(this),this.setValue=this.setValue.bind(this),this.getValue=this.getValue.bind(this);var e=this.options,n=e.value,i=e.onChange;this.$timeInput=Object(r.a)("<input>").val(n).addClass("TimeCell__time-input").on({change:i});var o=Object(r.a)("<div>").addClass("TimeCell__timeBtn prev").on({click:function(){return t.handleCLick(t.$timeInput,-1)}}),a=Object(r.a)("<div>").addClass("TimeCell__timeBtn next").on({click:function(){return t.handleCLick(t.$timeInput,1)}});this.element.append(o).append(a).append(this.$timeInput).addClass("TimeCell__timeCell"),this.element.on("mousewheel",function(e){return t.handleCLick(t.$timeInput,Math.sign(e.originalEvent.wheelDelta))})},handleCLick:function(t,e){var n=this.options.onChange,r=Number(t.val())+e;t.val(r),n()},setValue:function(t){this.$timeInput.val(t)},getValue:function(){return Number(this.$timeInput.val())}});n(209);function me(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function ve(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function be(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}r.a.widget("app.selectTime",{_create:function(){this.handleChange=this.handleChange.bind(this),this.setTime=this.setTime.bind(this),this.show=this.show.bind(this),this.hide=this.hide.bind(this),this.hours=r.a.app.timeCell({onChange:this.handleChange}),this.minutes=r.a.app.timeCell({onChange:this.handleChange}),this.seconds=r.a.app.timeCell({onChange:this.handleChange}),this.element.append(this.hours.element).append(this.minutes.element).append(this.seconds.element).addClass("VideoCell__select-time hidden").on({click:function(t){return t.stopPropagation()},dblclick:function(t){return t.stopPropagation()}})},handleChange:function(){var t=this.options.onChange,e=this.hours.getValue(),n=this.minutes.getValue(),r=this.seconds.getValue();t(new Date(this.archTime.setHours(e,n,r)))},setTime:function(t){this.archTime=t;var e=t.getHours(),n=t.getMinutes(),r=t.getSeconds();return this.hours.setValue(e),this.minutes.setValue(n),this.seconds.setValue(r),this},show:function(){return this.element.removeClass("hidden"),document.addEventListener("click",this.hide),this.topic(this.topic.key.ARCH_TIME).observe(this.setTime),this},hide:function(){return this.element.addClass("hidden"),document.removeEventListener("click",this.hide),this.topic(this.topic.key.ARCH_TIME).unobserve(this.setTime),this},_destroy:function(){this.hide(),this.element.empty()}});var ye=u()("NULL","dev"),ge=u()(!1,"isLive");r.a.widget("app.videoCell",{options:{key:-1,conn:null},STYLE_ACTIVE:"VideoCell--active",STYLE_LOADING:"VideoCell--loading",STYLE_PLAYING:"VideoCell--playing",STYLE_EMPTY:"VideoCell--empty",STYLE_ERROR:"VideoCell--error",STYLE_NOVIDEO:"VideoCell--novideo",_init:function(){var t=this;this.handleActive=this.handleActive.bind(this),this.handleList=this.handleList.bind(this),this.handleLoad=this.handleLoad.bind(this),this.handleError=this.handleError.bind(this),this.handlePlaybackPanel=this.handlePlaybackPanel.bind(this),this.handleStop=this.handleStop.bind(this),this.updateState=this.updateState.bind(this),this.handleFullscreen=this.handleFullscreen.bind(this),this.handleVisibilityChange=this.handleVisibilityChange.bind(this),this.updatePlayer=this.updatePlayer.bind(this),this.updateIndex=this.updateIndex.bind(this),this.propagateTime=this.propagateTime.bind(this),this.publishImageInfo=this.publishImageInfo.bind(this),this.getDecoratorsHeight=m()(this.getDecoratorsHeight.bind(this)),this.debugInfo=b()(this.debugInfo.bind(this),rt.c,{trailing:!1}),this.stats=this.stats.bind(this),this.gotFrame=function(){return t.element.trigger("frame")},this.renderStat=r.a.noop,this.showSpeaker=this.showSpeaker.bind(this),this.setCamera=this.setCamera.bind(this),this.setVolume=this.setVolume.bind(this),this.setAudio=this.setAudio.bind(this),this.setVisibleControls=this.setVisibleControls.bind(this),this.resetLiveStream=this.resetLiveStream.bind(this),this.videoMuted=!0,this.renderTime=m()(this.renderTime.bind(this),Object(rt.q)(rt.h)),this.renderTime.cache=new zt.a,this.pushTime=m()(this.pushTime.bind(this),Object(rt.q)(rt.h)),this.pushTime.cache=new zt.a,this.mediaState=Object(g.a)(this),this.meta={time:function(){return Object(R.d)(t.lastPts)},title:function(){return u()("",["camera","fullname"],t)}},this.topic(this.topic.key.STATS).observe(this.stats),this.topic(this.topic.key.APP_MODE).observe(this.handlePlaybackPanel),this.topic(this.topic.key.CAM_ARCH).observe(this.publishImageInfo);this.element.on({click:function(e){var n=e.ctrlKey;t.topic(t.topic.key.CAM_ACTIVE).get()!==t.camera&&t.topic(t.topic.key.UPDATE_CAM_ACTIVE).put(n?void 0:t.camera)},dblclick:function(){var e=t.element.fullScreen();t.element.fullScreen(!e),t.element.toggleClass("VideoCell--fullscreen")}}),Object(r.a)(document).on({fullscreenchange:this.handleFullscreen,visibilitychange:this.handleVisibilityChange})},_create:function(){var t=this,e=this.players.null,n=Object(r.a)("<div>").addClass("VideoCell__bar__fill"),i=Object(r.a)("<div>").addClass(["VideoCell__title","VideoCell__title__left"]).data("key","title"),o=Object(r.a)("<div>").addClass(["VideoCell__title","VideoCell__title__right"]).data("key","time"),a=Object(r.a)().add(i).add(o);if(a.on({mousedown:Object(Nt.a)(function(e){var n=Object(r.a)(e.currentTarget).data("key"),i=h()(["meta",n],t);t.topic(t.topic.key.CLIPBOARD).put({text:i})}),contextmenu:function(){return!1}}),!this.options.conn)throw new Error("No connection provided to VideoCell");this.$bar=Object(r.a)("<div>").addClass("VideoCell__bar"),this.$barContainer=Object(r.a)("<div>").addClass("VideoCell__bar-container").on({dblclick:function(t){return t.stopPropagation()}}),this.$frontLayer=Object(r.a)("<div>").addClass("VideoCell__front-layer"),this.$container=Object(r.a)("<div>").addClass("VideoCell__box"),this.$title=Object(r.a)("<span>").addClass("VideoCell__title__text"),this.$intermediateFrame=Object(r.a)("<canvas>").addClass("VideoCell__video-canvas"),this.$time=Object(r.a)("<span>").addClass("VideoCell__title__text").on({click:function(e){e.stopPropagation(),t.selectTime.show()}}),this.conn=this.options.conn,this.selectTime=r.a.app.selectTime({onChange:function(e){return t.topic(t.topic.key.PLAYBACK).assign({beginTime:e})}}),this.selectStream=r.a.app.selectStream(),this.selectArch=r.a.app.selectArch(),this.exportNow=r.a.app.exportNow(),this.fscreen=r.a.app.fscreen({target:this.element}),this.player=new e,this.speaker=r.a.app.speaker({target:this.$container}),this.playbackPanel=r.a.app.playbackPanel(),this.exportNow.element.addClass("VideoCell-button").addClass("VideoCell-button--blank"),this.fscreen.element.addClass("VideoCell-button"),this.speaker.element.addClass("VideoCell-button").addClass("VideoCell-button--blank"),this.$barContainer.append(i.append(this.$title)).append(n.clone()).append(o.append(this.$time)).append(this.selectStream.element).append(this.selectArch.element),this.$bar.append(this.$barContainer),this.$frontLayer.append(n.clone()).append(this.exportNow.element).append(this.speaker.element),this.element.addClass("VideoCell").addClass(this.STYLE_EMPTY).append(this.$bar).append(this.$frontLayer).append(this.$container).append(this.playbackPanel.element).append(this.selectTime.element),this.$container.append(this.$intermediateFrame).zoomable()},_destroy:function(){this.camera&&this.setCamera(void 0),this.topic(this.topic.key.STATS).unobserve(this.stats),this.topic(this.topic.key.APP_MODE).unobserve(this.handlePlaybackPanel),this.topic(this.topic.key.CAM_ARCH).unobserve(this.publishImageInfo),this.selectStream.destroy(),this.selectArch.destroy(),this.exportNow.destroy(),this.fscreen.destroy(),this.speaker.destroy(),this.$container.zoomable("destroy"),this.element.remove(),this.selectTime.destroy(),this.playbackPanel.destroy()},_setOptions:function(t){var e=t.camera,n=t.origin,r=t.pending,i=t.pos;i&&this.element.css({left:Object(R.a)(i.left),right:Object(R.a)(i.right),top:Object(R.a)(i.top),bottom:Object(R.a)(i.bottom)});var o=f()(this.origin,n);o||(this.origin=n),!o&&e&&this.setCamera(e),!o&&r&&r.then(this.setCamera)},setVisibleControls:function(t){this.$barContainer&&this.$frontLayer&&(t?(this.$barContainer.show(),this.$frontLayer.show()):(this.$barContainer.hide(),this.$frontLayer.hide()))},showSpeaker:function(){this.speaker.options.setAudio=this.setAudio,this.speaker.options.setVolume=this.setVolume,this.player.setAudio(this.videoMuted),Object(r.a)(this.speaker.element).show()},setVolume:function(t){this.player.setVolume(t)},setAudio:function(t){this.videoMuted=!t,this.player.setAudio(this.videoMuted)},setCamera:function(t){x.a.video("videoCell",this.options.key,"setting camera to",ye(t),"from",ye(this.camera)),Object(Rt.m)(t,this.camera)&&x.a.video("videoCell","same camera!"),this.camera&&(this.mediaState=this.mediaState.stop(),this.topic(this.topic.key.PLAYBACK).unobserve(this.updatePlayer),this.topic(this.topic.key.CAM_ACTIVE).unobserve(this.handleActive),this.topic(this.topic.key.CAM_ACTIVE).unobserve(this.updatePlayer),this.topic(this.topic.key.CAM_STATES).unobserve(this.updateState),this.camera.streamActive.unobserve(this.updatePlayer),this.camera.streams.unobserve(this.resetLiveStream),this.element.removeClass([this.STYLE_NOVIDEO,this.STYLE_PLAYING,this.STYLE_LOADING,this.STYLE_ERROR]).addClass(this.STYLE_EMPTY),this.$container.zoomable("reset"),this.exportNow.options.camera=void 0,this.playbackPanel.setCamera(void 0),this.selectStream.setCamera(void 0),this.selectArch.setCamera(void 0),this.camera=void 0,this.speaker.element.hide(),this.clearCell(),this.renderStat()),t?(this.setTitle(t),this.camera=t,this.topic(this.topic.key.CAM_STATES).observe(this.updateState),this.exportNow.options.camera=t,this.playbackPanel.setCamera(t),this.selectStream.setCamera(t),this.selectArch.setCamera(t),this.topic(this.topic.key.PLAYBACK).observe(this.updatePlayer),this.topic(this.topic.key.CAM_ACTIVE).observe(this.handleActive),this.topic(this.topic.key.CAM_ACTIVE).observe(this.updatePlayer),t.streamActive.observe(this.updatePlayer),t.streams.observe(this.resetLiveStream),this.element.removeClass([this.STYLE_EMPTY,this.STYLE_ERROR,this.STYLE_NOVIDEO]),this.renderStat()):this.element.addClass([this.STYLE_NOVIDEO]),this.canvasClear()},setTitle:function(t){var e="",n="";t&&(e=t.id,n=t.fullname),this.$title.text(n),this.$container.attr({"data-id":e})},setType:function(t){if(this.player.clean(),t in this.players){var e=this.players[t];this.player=new e(this.$container,{handleLoad:this.handleLoad,handleError:this.handleError,handleStop:this.handleStop}),this.resetStyle()}},clearCell:function(){this.key=0,this.setTitle(),this.setType(null),this.element.addClass(this.STYLE_NOVIDEO)},handleActive:function(t){var e=Object(Rt.m)(t,this.camera);this.element.toggleClass(this.STYLE_ACTIVE,e)},handleList:function(t){var e=t[this.options.key];Object(Rt.m)(e,this.camera)||this.setCamera(e)},resetStyle:function(){this.element.removeClass([this.STYLE_ERROR,this.STYLE_LOADING])},handleLoad:function(){this.resetStyle(),this.canvasClear(),this.publishImageInfo(this.camera)},handleError:function(){this.element.addClass(this.STYLE_ERROR),this.mediaState=this.mediaState.stop().play()},handleStop:function(){var t=this.player.getImageData();if(t){var e=be(this.$intermediateFrame,1),n=e[0],r=n.getContext("2d");n.width=t.width,n.height=t.height,r.putImageData(t,0,0)}},updateState:function(t,e){var n,r,i,o,a;return regeneratorRuntime.async(function(c){for(;;)switch(c.prev=c.next){case 0:if(n=s()("origin",this.camera),r=s()([n],t),i=s()([n],e),n||!f()(r,i)){c.next=5;break}return c.abrupt("return");case 5:return c.next=7,regeneratorRuntime.awrap(this.camera.isReady);case 7:if(o=c.sent,a=r,!a||o){c.next=13;break}return c.next=12,regeneratorRuntime.awrap(this.camera.getStreamsMeta());case 12:this.setCamera(this.camera);case 13:a&&o&&this.updatePlayer(),a||(this.mediaState=this.mediaState.stop()),this.element.toggleClass(this.STYLE_NOVIDEO,!a);case 16:case"end":return c.stop()}},null,this)},handleFullscreen:function(){var t=this.topic(this.topic.key.PREFS).get(),e=t.disconnectInactive,n=Object(r.a)(document).fullScreen(),i=n===this.element[0]||n===document.body;n&&!i&&e&&(this.mediaState=this.mediaState.stop()),!n&&this.camera&&(this.mediaState=this.mediaState.play())},updateIndex:function(t){var e=this.topic(this.topic.key.CELL_IDX).get(),n=Object(Ft.b)(t);e.set(n,this)},clearIndex:function(t){var e=this.topic(this.topic.key.CELL_IDX).get(),n=Object(Ft.b)(t);e.delete(n)},handleVisibilityChange:function(){this.speaker.element.trigger("layoutHidden")},handlePlaybackPanel:function(t){t===Mt.a.ARCH_SEARCH?this.playbackPanel.show():this.playbackPanel.hide()},updatePlayer:function(){if(this.camera){var t=this.camera,e=t.stream,n=t.isOnline,i=this.topic(this.topic.key.APP_MODE).get(),o=i===Mt.a.LIVE&&!n;if(e.format){var a=Object(Rt.m)(this.topic(this.topic.key.CAM_ACTIVE).get(),this.camera),s=this.topic(this.topic.key.PREFS).get(),c=s.noKeyFrames,u=this.topic(this.topic.key.PLAYBACK).get(),l=0===u.speed&&!u.beginTime||o,h={endpoint:e.accessPoint,format:Object(zt.g)(e.format),method:l?"stop":"play",speed:u.speed,keyFrames:!c&&!a};u.beginTime&&(h.beginTime=Object(rt.m)(u.beginTime),h.archive=this.camera.archSelectedStorage,h.archFastMjpeg=this.topic(this.topic.key.PREFS).get().archFastMjpeg),h.format===$t.a.JPEG&&(h.width=Object(zt.f)(this.element.width(),y.a.settings.frameWidthList),h.height=0,h.vc=y.a.settings.mjpegCompression),this.mediaState=this.mediaState[h.method](h),this.resetStyle(),this.element.toggleClass(this.STYLE_NOVIDEO,o),Object(r.a)(this.player.video).one("audioTrack",this.showSpeaker)}}},player:null,players:{null:j,mse:St,img:Dt},push:function(t){this.pts0=this.pts0||t.pts,this.now0=this.now0||Date.now(),this.player.push(t),o()(this.propagateTime,t),o()(this.renderStat,t),o()(this.gotFrame)},updateTime:function(t,e){e(t)},renderTime:function(t){this.$time[0].innerText=Object(R.e)(t)},pushTime:function(t){this.topic(this.topic.key.ARCH_TIME).put(t)},propagateTime:function(t){var e=ge(this.camera);if(!e){var n=new Date(t.pts);this.pushTime(n)}this.renderTime(t.pts),this.lastPts=t.pts},debugInfo:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.pts-this.pts0,n=Date.now()-this.now0,r=e-n,i=this.camera?Object.entries(this.camera.state.get()):["n/a"],o=ye(this.camera);this.$debug[0].innerText="\nplr\t".concat(this.mediaState.state,"\ncam\t").concat(o,"\n\t").concat(i.join("\n\t"),"\n\nkey ").concat(t.key,"\npts ").concat(t.pts,"\nΔts ").concat(r,"\nlen ").concat(t.payload&&t.payload.byteLength,"\n").concat(this.player.stats(),"\n\t\t")},stats:function(t){t&&(this.$debug=Object(r.a)("<pre>").addClass("VideoCell__debug"),this.element.append(this.$debug),this.renderStat=this.debugInfo),t&&this.camera&&this.camera.state.observe(this.debugInfo),!t&&this.$debug&&(this.$debug.remove(),this.$debug=void 0,this.renderStat=r.a.noop),!t&&this.camera&&this.camera.state.unobserve(this.debugInfo)},getImageInfo:function(){var t=this.player.getImageInfo();return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?me(n,!0).forEach(function(e){ve(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):me(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},t,{aspect:Object(O.a)(t)})},publishImageInfo:function(t){var e=Object(Rt.m)(t,this.camera);e&&this.topic(this.topic.key.CAM_ARCH_IMAGE_INFO).put(this.getImageInfo())},canvasClear:function(){var t=be(this.$intermediateFrame,1),e=t[0];e.getContext("2d").clearRect(0,0,e.width,e.height)},resetLiveStream:function(){var t=this.topic(this.topic.key.APP_MODE).get();t===Mt.a.LIVE&&this.camera.resetLiveStream()},getDecoratorsHeight:function(){return this.$bar.height()+this.playbackPanel.element.height()}})},323:function(t,e,n){var r,i,o;i=[n(30)],r=function(t){var e,n,r=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],i="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],o=Array.prototype.slice;if(t.event.fixHooks)for(var a=r.length;a;)t.event.fixHooks[r[--a]]=t.event.mouseHooks;var s=t.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var e=i.length;e;)this.addEventListener(i[--e],c,!1);else this.onmousewheel=c;t.data(this,"mousewheel-line-height",s.getLineHeight(this)),t.data(this,"mousewheel-page-height",s.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var e=i.length;e;)this.removeEventListener(i[--e],c,!1);else this.onmousewheel=null;t.removeData(this,"mousewheel-line-height"),t.removeData(this,"mousewheel-page-height")},getLineHeight:function(e){var n=t(e),r=n["offsetParent"in t.fn?"offsetParent":"parent"]();return r.length||(r=t("body")),parseInt(r.css("fontSize"),10)||parseInt(n.css("fontSize"),10)||16},getPageHeight:function(e){return t(e).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};function c(r){var i=r||window.event,a=o.call(arguments,1),c=0,h=0,d=0,f=0,p=0,m=0;if(r=t.event.fix(i),r.type="mousewheel","detail"in i&&(d=-1*i.detail),"wheelDelta"in i&&(d=i.wheelDelta),"wheelDeltaY"in i&&(d=i.wheelDeltaY),"wheelDeltaX"in i&&(h=-1*i.wheelDeltaX),"axis"in i&&i.axis===i.HORIZONTAL_AXIS&&(h=-1*d,d=0),c=0===d?h:d,"deltaY"in i&&(d=-1*i.deltaY,c=d),"deltaX"in i&&(h=i.deltaX,0===d&&(c=-1*h)),0!==d||0!==h){if(1===i.deltaMode){var v=t.data(this,"mousewheel-line-height");c*=v,d*=v,h*=v}else if(2===i.deltaMode){var b=t.data(this,"mousewheel-page-height");c*=b,d*=b,h*=b}if(f=Math.max(Math.abs(d),Math.abs(h)),(!n||f<n)&&(n=f,l(i,f)&&(n/=40)),l(i,f)&&(c/=40,h/=40,d/=40),c=Math[c>=1?"floor":"ceil"](c/n),h=Math[h>=1?"floor":"ceil"](h/n),d=Math[d>=1?"floor":"ceil"](d/n),s.settings.normalizeOffset&&this.getBoundingClientRect){var y=this.getBoundingClientRect();p=r.clientX-y.left,m=r.clientY-y.top}return r.deltaX=h,r.deltaY=d,r.deltaFactor=n,r.offsetX=p,r.offsetY=m,r.deltaMode=0,a.unshift(r,c,h,d),e&&clearTimeout(e),e=setTimeout(u,200),(t.event.dispatch||t.event.handle).apply(this,a)}}function u(){n=null}function l(t,e){return s.settings.adjustOldDeltas&&"mousewheel"===t.type&&e%120==0}t.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})},o="function"==typeof r?r.apply(e,i):r,void 0===o||(t.exports=o)},324:function(t,e,n){var r=n(30);n(362);
/*!
 * jQuery UI Touch Punch 0.2.3
 *
 * Copyright 2011–2014, Dave Furfero
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Depends:
 *  jquery.ui.widget.js
 *  jquery.ui.mouse.js
 */
!function(t){if(t.support.touch="ontouchend"in document,t.support.touch){var e,n=t.ui.mouse.prototype,r=n._mouseInit,i=n._mouseDestroy;n._touchStart=function(t){!e&&this._mouseCapture(t.originalEvent.changedTouches[0])&&(e=!0,this._touchMoved=!1,o(t,"mouseover"),o(t,"mousemove"),o(t,"mousedown"))},n._touchMove=function(t){e&&(this._touchMoved=!0,o(t,"mousemove"))},n._touchEnd=function(t){e&&(o(t,"mouseup"),o(t,"mouseout"),this._touchMoved||o(t,"click"),e=!1)},n._mouseInit=function(){this.element.bind({touchstart:t.proxy(this,"_touchStart"),touchmove:t.proxy(this,"_touchMove"),touchend:t.proxy(this,"_touchEnd")}),r.call(this)},n._mouseDestroy=function(){this.element.unbind({touchstart:t.proxy(this,"_touchStart"),touchmove:t.proxy(this,"_touchMove"),touchend:t.proxy(this,"_touchEnd")}),i.call(this)}}function o(t,e){if(!(t.originalEvent.touches.length>1)){t.preventDefault();var n=t.originalEvent.changedTouches[0],r=document.createEvent("MouseEvents");r.initMouseEvent(e,!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),t.target.dispatchEvent(r)}}}(r)},325:function(t,e,n){var r=n(30);
/**
 * @preserve jquery.fullscreen 1.1.5
 * https://github.com/kayahr/jquery-fullscreen-plugin
 * Copyright (C) 2012-2013 Klaus Reimer <k@ailis.de>
 * Licensed under the MIT license
 * (See http://www.opensource.org/licenses/mit-license)
 */
/**
 * @preserve jquery.fullscreen 1.1.5
 * https://github.com/kayahr/jquery-fullscreen-plugin
 * Copyright (C) 2012-2013 Klaus Reimer <k@ailis.de>
 * Licensed under the MIT license
 * (See http://www.opensource.org/licenses/mit-license)
 */
!function(t){function e(t){var e,n,r;return this.length?(e=this[0],e.ownerDocument?r=e.ownerDocument:(r=e,e=r.documentElement),null==t?r.exitFullscreen||r.webkitExitFullscreen||r.webkitCancelFullScreen||r.msExitFullscreen||r.mozCancelFullScreen?(t=!!(r.fullscreenElement||r.msFullscreenElement||r.webkitIsFullScreen||r.mozFullScreen),t&&(r.fullscreenElement||r.webkitFullscreenElement||r.webkitCurrentFullScreenElement||r.msFullscreenElement||r.mozFullScreenElement)||t):null:t?(n=e.requestFullscreen||e.webkitRequestFullscreen||e.webkitRequestFullScreen||e.msRequestFullscreen||e.mozRequestFullScreen,n&&n.call(e),this):(n=r.exitFullscreen||r.webkitExitFullscreen||r.webkitCancelFullScreen||r.msExitFullscreen||r.mozCancelFullScreen,n&&n.call(r),this)):this}function n(e){t(document).trigger(new t.Event("fullscreenchange"))}function r(e){t(document).trigger(new t.Event("fullscreenerror"))}var i,o,a;t.fn.fullScreen=e,t.fn.toggleFullScreen=function(){return e.call(this,!e.call(this))},i=document,i.webkitCancelFullScreen?(o="webkitfullscreenchange",a="webkitfullscreenerror"):i.msExitFullscreen?(o="MSFullscreenChange",a="MSFullscreenError"):i.mozCancelFullScreen?(o="mozfullscreenchange",a="mozfullscreenerror"):(o="fullscreenchange",a="fullscreenerror"),t(document).bind(o,n),t(document).bind(a,r)}(r)},330:function(t,e,n){},331:function(t,e,n){},332:function(t,e,n){},333:function(t,e,n){},334:function(t,e,n){},335:function(t,e,n){},336:function(t,e,n){},337:function(t,e){t.exports='<svg class="Playback__icon" viewBox="0 0 27 19"><polygon points="20,8 15,8 15,3 12,3 12,8 7,8 7,11 12,11 12,16 15,16 15,11 20,11 "></polygon></svg>'},338:function(t,e){t.exports='<svg class="Playback__icon" viewBox="0 0 27 19"><rect x="7" y="8" width="13" height="3"></rect></svg>'},339:function(t,e){t.exports='<svg class="Playback__icon" viewBox="0 0 27 19"><polygon points="11.5,2.5 9.5,2.5 9.5,16.5 11.5,16.5 18.5,9.5 18.5,8.5 "></polygon></svg>'},340:function(t,e){t.exports='<svg class="Playback__icon" viewBox="0 0 27 19"><rect x="7.5" y="2.5" width="4" height="14"></rect><rect x="15.5" y="2.5" width="4" height="14"></rect></svg>'},341:function(t,e,n){},342:function(t,e,n){},343:function(t,e,n){},37:function(t,e,n){"use strict";n.d(e,"a",function(){return x}),n.d(e,"e",function(){return T}),n.d(e,"h",function(){return A}),n.d(e,"g",function(){return I}),n.d(e,"f",function(){return L}),n.d(e,"b",function(){return D}),n.d(e,"c",function(){return M}),n.d(e,"d",function(){return $});var r=n(6),i=n.n(r),o=n(109),a=n.n(o),s=n(85),c=n.n(s),u=n(24),l=n.n(u),h=n(7),d=n.n(h),f=n(34),p=n.n(f),m=n(195),v=n.n(m),b=n(163),y=n.n(b),g=n(137),O=n(5);function w(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function k(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?w(n,!0).forEach(function(e){S(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function S(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function j(t,e){var n=t.get(e.multiPhaseSyncId),r=n?n.timestamp:e.timestamp,i={begin:e.timestamp,end:e.timestamp,type:e.type,timestamp:e.timestamp,positions:e.rectangles,accessPoint:e.origin};switch(e.alertState){case"began":t.set(e.multiPhaseSyncId,k({},i,{end:r}));break;case"ended":t.set(e.multiPhaseSyncId,k({},i,{begin:r,timestamp:r,positions:n?n.rectangles:e.rectangles}));break;case"happened":t.set(e.id,{timestamp:e.timestamp,type:e.type,positions:e.rectangles,accessPoint:e.origin})}return t}var _=new Date(0);function C(t){var e=l()(_,["raisedAt"],t),n=l()(e,["reaction","reactedAt"],t);return k({},t,{begin:e,end:n})}function E(t){var e=k({},t);return t.begin&&t.end&&(e.begin=Object(O.l)(t.begin),e.end=Object(O.l)(t.end)),t.timestamp&&(e.begin=Object(O.l)(t.timestamp),e.end=new Date(e.begin.getTime()+1)),e}function P(t){return Object(g.a)(Object(O.l)(t.begin),Object(O.l)(t.end))}var x=i()([a.a,l()(new Date,"date.begin")]),T=i()([c.a,l()(new Date,"date.end")]),A=d()(P);function I(t){return i()([p()(j,new Map),function(t){return t.values()},Array.from,d()(E)])(t)}var L=i()([d()(C),d()(E)]),D=p()(function(t,e){for(var n=e.time,r=n.begin,i=n.end,o=k({},t),a=new Date(0),s=0;a.getTime()<i-O.a;s+=1)a=new Date(r+O.a*s),a.setHours(0,0,0,0),o[a]=!0;return o},{}),M=p()(function(t,e){return t||e.length>0},v()()),$=function(t){return function(e){for(var n=0;n<t.length;n+=1){var r=t[n].date,i=r.begin,o=r.end,a=y()(i,o);if(a(e))return!0}return!1}}},39:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n(3),i=n.n(r),o=n(6),a=n.n(o),s=n(157),c=n.n(s),u=a()([i()("data.type"),c()("authToken")]),l=function(t){var e=/authToken=([^&]+)/;if(!e.test(t))return;return e.exec(t)[1]}(location.search);function h(t){if(!l)return t;var e=/\?/.test(t)?"&":"?";return t+e+"authToken="+l}window.addEventListener("message",function(t){u(t)&&(l=t.data.token)}),e.b={get authToken(){return l}}},4:function(t,e,n){"use strict";n.d(e,"b",function(){return s});var r,i=n(35),o=n.n(i),a={arch:o()("arch"),bookmarks:o()("bookmarks"),cam:o()("camera"),camptz:o()("camera:ptz"),common:o()("common"),deprecated:(r=o()("deprecated"),function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return r.apply(void 0,e.concat([new Error]))}),embedded:o()("embedded"),events:o()("events"),export:o()("arch:export"),layout:o()("layout"),locomote:o()("video:locomote"),search:o()("arch:search"),topics:o()("topics"),video:o()("video"),player:o()("video:player"),ws:o()("video:ws"),pref:o()("preferences"),maps:o()("maps")};function s(t){t?o.a.enable("*"):o.a.disable()}e.a=a},43:function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"a",function(){return i});var r={H264:"H264",H265:"H265",MJPG:"MJPG"},i={JPEG:"jpeg",MP4:"mp4"}},433:function(t,e){},44:function(t,e,n){"use strict";n.d(e,"g",function(){return b}),n.d(e,"e",function(){return y}),n.d(e,"a",function(){return g}),n.d(e,"c",function(){return O}),n.d(e,"d",function(){return S}),n.d(e,"f",function(){return j}),n.d(e,"b",function(){return _}),n.d(e,"h",function(){return C});var r=n(6),i=n.n(r),o=n(7),a=n.n(o),s=n(33),c=n.n(s),u=n(34),l=n.n(u),h=n(160),d=n.n(h);function f(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||m(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function p(t){return function(t){if(Array.isArray(t))return t}(t)||m(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function m(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}var v=i()(d()(""),a()(function(t){return t.charCodeAt(0)}),function(t){return Uint8Array.from(t)});function b(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new Promise(function(n,r){var i=new Image;i.opacity=e,i.src=t,i.onload=function(){n(i)},i.onerror=r})}function y(t){var e=p(t.layers),n=e[0],r=e.slice(1),i=t.opacity,o=document.createElement("canvas"),a=o.getContext("2d"),s=b(n);return s.then(function(t){o.width=t.width,o.height=t.height},c.a),Promise.all([s].concat(f(r.map(function(t){return b(t,i)})))).then(function(t){return l()(function(t,e){return t.globalAlpha=e.opacity,t.drawImage(e,0,0,t.canvas.width,t.canvas.height),t},t)}(a)).then(function(t){return new Promise(function(e){t.canvas.msToBlob?e(t.canvas.msToBlob()):t.canvas.toBlob(e,"image/png")})})}function g(t){var e=t.width,n=t.height;if(Boolean(e)&&Boolean(n))return e/n}function O(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image/png",n=atob(t),r=v(n);return new Blob([r],{type:e})}var w,k,S=(w=document.createElement("canvas"),k=w.getContext("2d"),w.width=1,w.height=1,k?k.getImageData(0,0,w.width,w.height):null);function j(t){var e=t.naturalWidth||t.videoWidth,n=t.naturalHeight||t.videoHeight;if(e&&n){var r=document.createElement("canvas"),i=r.getContext("2d");return r.width=e,r.height=n,i.drawImage(t,0,0),i.getImageData(0,0,r.width,r.height)}}function _(t){return URL.createObjectURL(new Blob([t],{type:"image/jpeg"}))}var C=a()(function(t){var e=t.payload;return _(e)})},488:function(t,e){},489:function(t,e){},493:function(t,e){},494:function(t,e){},5:function(t,e,n){"use strict";n.d(e,"h",function(){return u}),n.d(e,"c",function(){return l}),n.d(e,"i",function(){return h}),n.d(e,"f",function(){return d}),n.d(e,"d",function(){return f}),n.d(e,"a",function(){return p}),n.d(e,"e",function(){return m}),n.d(e,"b",function(){return v}),n.d(e,"g",function(){return b}),n.d(e,"q",function(){return y}),n.d(e,"p",function(){return g}),n.d(e,"l",function(){return O}),n.d(e,"m",function(){return w}),n.d(e,"n",function(){return k}),n.d(e,"o",function(){return S}),n.d(e,"k",function(){return j}),n.d(e,"j",function(){return _});var r=n(106),i=n.n(r),o=n(119),a=n.n(o),s=n(6),c=n.n(s),u=1e3,l=u/10,h=10*u,d=60*u,f=60*d,p=24*f,m=1/u,v=p*m,b=0;function y(t){return function(e){return Math.floor(e/t)}}var g=function(t){return t*m};function O(t){var e,n=parseInt(t.substr(0,4),10),r=parseInt(t.substr(4,2),10)-1,i=parseInt(t.substr(6,2),10),o=parseInt(t.substr(9,2),10),a=parseInt(t.substr(11,2),10),s=parseInt(t.substr(13,2),10),c=parseInt(t.substr(16,3),10);return Number.isNaN(c)&&(c=0),e=Date.UTC(n,r,i,o,a,s,c),new Date(e)}function w(t){var e;return t instanceof Date&&(e=t.toISOString().replace(/[-:Z]/g,"")),e}function k(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"HH:MM:ss dd.mm.yyyy";return i()(new Date(t),e)}function S(t){var e=new Date(t),n=new Date(t);return e.setHours(0,0,0,0),n.setHours(23,59,59,999),{begintime:e,endtime:n}}var j=c()(w,a()("past")),_=c()(w,a()("future"))},59:function(t,e,n){"use strict";var r=n(7),i=n.n(r),o=n(32),a=n.n(o),s=n(3),c=n.n(s),u=n(53),l=n.n(u),h=n(167),d=n.n(h),f=n(313),p=n.n(f),m=n(68),v=n.n(m),b=n(6),y=n.n(b),g=n(210),O=n.n(g),w="MAP_VIEW_MODE_LAYOUT_ONLY",k=n(95);function S(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function j(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?S(n,!0).forEach(function(e){_(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function _(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"c",function(){return C}),n.d(e,"g",function(){return E}),n.d(e,"a",function(){return M}),n.d(e,"d",function(){return $}),n.d(e,"b",function(){return N}),n.d(e,"e",function(){return U}),n.d(e,"f",function(){return Y}),n.d(e,"h",function(){return G});var C=-1,E=function(){return{idx:C}},P=/Cell/,x=a()(function(t){var e=t.type;return P.test(e)}),T=i()(function(t){var e=t.Key,n=t.Value,r=n.camera_adapter,i=n.dimenstions,o=n.linked_cells,a=n.position,s=n.left_sibling,c=n.right_sibling,u=n.top_sibling,l=n.bottom_sibling,h=n.video_parameters,d=h.audio_volume,f=h.camera_stream_resolution,p=h.default_channel_mode,m=n.$type;return{key:e,origin:r,size:Object(k.c)(i),position:a,linkedCells:o,sibling:{left:s,right:c,top:u,bottom:l},ext:{audioVolume:d,cameraStream:!p&&f},type:m}}),A=-1,I={left:0,right:0,top:1,bottom:1};function L(t){var e=p()(function(t,e){t[e.key]=e},O()())(t),n=function(t){return function e(n,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=n.sibling[r];if(o===A)return i;var a=t[o],s=a.size[I[r]];return e(a,r,i+s)}}(e);return t.map(function(t){return j({pos:{left:n(t,"left"),right:n(t,"right"),top:n(t,"top"),bottom:n(t,"bottom")}},t)})}var D=i()(function(t){var e=t.key,n=t.pos,r=t.origin,i=t.ext;return{key:e,pos:n,origin:r,ext:i}}),M={key:0,origin:"",pos:{left:0,right:0,top:0,bottom:0},ext:{audioVolume:50,cameraStream:0}};function $(t){var e=[];return t&&e.push(j({},M,{camera:t,origin:t.origin})),e}var R={left:"width",right:"width",top:"height",bottom:"height"},F={width:{start:"left",end:"right"},height:{start:"top",end:"bottom"}},N={cells:[]},z={top:"top_sibling_position",left:"left_sibling_position",right:"right_sibling_position",bottom:"bottom_sibling_position"},B={top:"top",right:"right",bottom:"bottom",left:"left"},V=function(t){return function(e){return t[z[e]]}},H=function(t){return{position:t.index,dimensions:t.size,left_sibling_position:t.sibling.left,right_sibling_position:t.sibling.right,top_sibling_position:t.sibling.top,bottom_sibling_position:t.sibling.bottom,camera_ap:t.origin}};var U=function(t){return{id:t.id,display_name:t.displayName,alarm_mode:!1,is_for_alarm:!1,is_user_defined:!0,map_id:"",map_view_mode:w,cells:l()(H)(t.cells)}},Y=function(t){return{etag:t.etag||"",body:U(t)}};function q(t,e,n){for(var r=R[t],i=0,o=V(n)(t);o>-1;){var a=e[o],s=a.dimensions[r];i+=s,o=V(a)(t)}return i}var W=function(t){return function(e){return y()([a()(function(t){return function(e){var n=F[t].start,r=V(e)(n);return r===A}}(t)),i()(function(n){return q(F[t].end,e,n)+n.dimensions[t]}),d.a])(e)}},G=i()(function(t){return{displayName:t.display_name,cells:y()([T,L,x,D,v()("key")])(t.cells)}}),X=function(t){return l()(function(e){return{index:e.position,position:e.position,origin:e.camera_ap,size:e.dimensions,pos:l()(function(t,e){return function(n){var r=q(n,t,e),i=W(R[n])(t);return r/i}}(t,e))(B),sibling:l()(V(e))(B),ext:{audioVolume:c()("video_parameters.audio_volume")(e),cameraStream:c()("video_parameters.stream_resolution")(e)}}})(t)};i()(function(t){var e=t.body,n=t.meta;return{etag:n.etag,id:n.layout_id,displayName:e.display_name,size:{height:W("height")(e.cells),width:W("width")(e.cells)},cells:X(e.cells)}})},65:function(t,e,n){"use strict";function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=t^e;return n+(n<<1)+(n<<4)+(n<<7)+(n<<8)+(n<<24)>>>0}n.d(e,"a",function(){return r}),n.d(e,"b",function(){return i});var i=function(t){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n+=1)e[n]=t.charCodeAt(n);return e}(t).reduce(r,0)}},67:function(t,e,n){"use strict";var r=n(103),i=n.n(r),o=n(6),a=n.n(o),s=n(3),c=n.n(s),u=n(24),l=n.n(u),h=n(7),d=n.n(h),f=n(34),p=n.n(f),m=n(11),v=n(4),b=n(27),y=n(73),g=n(168),O=n.n(g),w=n(46),k=n.n(w),S=n(42),j=n.n(S),_=n(21),C=n.n(_),E=n(162),P=n.n(E),x=n(133),T=n.n(x),A=n(122),I=n(128),L=n.n(I),D=n(68),M=n.n(D),$=n(288),R=n.n($),F=n(5),N=n(13),z=a()([d()(a()(F.l,L()("getTime"))),R()(j.a),M()(j.a)]);var B=function(){var t=[],e=-1/0;this.init=function(n){t=z(n),e=-1/0},this.step=function(n,r){return t.length?(Number.isFinite(e)?e+=n:e=Object(N.e)(r,t),t[e]):null},this.next=this.step.bind(null,this.FORWARD),this.prev=this.step.bind(null,this.BACKWARD),this.clear=function(){t=[],e=-1/0},this.current=function(){return t[e]}},V=n(37);function H(t){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},H(t)}function U(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function q(t){return q=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},q(t)}function W(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function G(t,e){return G=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},G(t,e)}function X(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var K=c()("storage"),Z=c()("accessPoint"),J="archive",Q=n(40),tt=n.n(Q),et=n(72),nt=n.n(et),rt=n(71),it=n.n(rt),ot=n(181),at=n.n(ot),st=n(289),ct=n.n(st),ut=n(33),lt=n.n(ut),ht=n(9),dt=n(30),ft=n.n(dt);function pt(t){return pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pt(t)}function mt(t,e){return!e||"object"!==pt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function vt(t){return vt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},vt(t)}function bt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&yt(t,e)}function yt(t,e){return yt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},yt(t,e)}function gt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ot(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function wt(t,e,n){return e&&Ot(t.prototype,e),n&&Ot(t,n),t}var kt=.67,St="ptzSession",jt=function(){function t(e){gt(this,t),this.ctx=e,this.ctx.state=this}return wt(t,[{key:"init",value:function(){return this}},{key:"failed",value:function(){return this}},{key:"acquired",value:function(){return this}},{key:"release",value:function(){return new At(this.ctx)}}]),t}(),_t=function(t){function e(){return gt(this,e),mt(this,vt(e).apply(this,arguments))}return bt(e,t),wt(e,[{key:"init",value:function(){return new Ct(this.ctx)}}]),e}(jt),Ct=function(t){function e(t){var n;gt(this,e),n=mt(this,vt(e).call(this,t));var r=Object(N.b)(St);return r?(v.a.camptz("session %c%s (%o)","font-weight: bold","Reusing",r),mt(n,new xt(n.ctx))):mt(n,new Et(n.ctx))}return bt(e,t),e}(jt),Et=function(t){function e(t){var n;return gt(this,e),n=mt(this,vt(e).call(this,t)),n.ctx.acquireId=null,v.a.camptz("session %c%s","font-weight: bold","Request"),m.z({tcid:t.tcid}).then(function(t){var e=t.data.session_id;v.a.camptz("session %c%s (%o)","font-weight: bold","Acquired",e),Object(N.b)(St,e,ht.a.settings.ptzKeepaliveInterval)},function(){return n.ctx.state.failed()}).then(function(){return n.ctx.state.acquired()}),n}return bt(e,t),wt(e,[{key:"failed",value:function(){return new Pt(this.ctx)}},{key:"acquired",value:function(){return document.hidden?new Pt(this.ctx):new xt(this.ctx)}}]),e}(jt),Pt=function(t){function e(t){var n;gt(this,e),n=mt(this,vt(e).call(this,t)),v.a.camptz("session %c%s","font-weight: bold","Failed to acquire.");var r=n.ctx.topic;return r(r.key.PTZ_READY).put(!1),n.ctx.acquireId=setTimeout(function(){return new Et(n.ctx)},ht.a.settings.ptzKeepaliveInterval),n}return bt(e,t),e}(jt),xt=function(t){function e(t){var n;gt(this,e),n=mt(this,vt(e).call(this,t));var r=n.ctx.topic;return r(r.key.PTZ_READY).put(!0),ft()(window).on({"blur.ptz":function(){ft()(window).one({focus:function(){return new Ct(n.ctx)}}),new At(n.ctx)}}),function(){It(this),this.keepId=setInterval(It,ht.a.settings.ptzKeepaliveInterval*kt,this)}.call(n.ctx),n}return bt(e,t),e}(jt),Tt=function(t){function e(t){var n;return gt(this,e),n=mt(this,vt(e).call(this,t)),v.a.camptz("session %c%s","font-weight: bold, color: red","Lost"),Lt.call(n.ctx),new Et(n.ctx),n}return bt(e,t),e}(jt),At=function(t){function e(t){var n;gt(this,e),n=mt(this,vt(e).call(this,t));var r=n.ctx.topic;return r(r.key.PTZ_READY).put(!1),v.a.camptz("session %c%s (%o)","font-weight: bold","Release",Object(N.b)(St)),ft()(window).off("blur.ptz"),Lt.call(n.ctx),function(){clearTimeout(this.acquireId)}.call(n.ctx),n}return bt(e,t),wt(e,[{key:"init",value:function(){return new Ct(this.ctx)}}]),e}(jt);function It(t){var e=Object(N.b)(St);m.F({tcid:t.tcid,session_id:e}).then(function(){return Object(N.b)(St,e,ht.a.settings.ptzKeepaliveInterval)},function(){return new Tt(t)})}function Lt(){this.keepId&&(clearInterval(this.keepId),this.keepId=void 0,Object(N.b)(St,null))}var Dt=function(){function t(e,n){gt(this,t),this.ctx={tcid:e,topic:n,acquireId:null,keepId:null},this.ctx.state=new _t(this.ctx)}return wt(t,[{key:"init",value:function(){this.ctx.state.init()}},{key:"release",value:function(){this.ctx.state.release()}}]),t}();function Mt(t){return Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mt(t)}function $t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Rt(t,e){return!e||"object"!==Mt(e)&&"function"!=typeof e?Nt(t):e}function Ft(t){return Ft=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ft(t)}function Nt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zt(t,e){return zt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},zt(t,e)}function Bt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Vt=5,Ht=tt()(1,10),Ut=d()(function(t){return Number(t.id)}),Yt=P()(j.a),qt=Object(N.n)(1),Wt=tt()(0,1),Gt=function(t){return t?function(t){return Math.pow(1.5,t-15.7)}:ct()(.1)},Xt={pan:0,tilt:0,zoom:0},Kt="absolute",Zt="continuous",Jt=C()(Kt),Qt=nt()([[c()("isContinous"),it()(Zt)],[c()("isAbsolute"),it()(Kt)]]);function te(t){v.a.camptz("error",t)}function ee(t){return ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ee(t)}function ne(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function re(t){return re=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},re(t)}function ie(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function oe(t,e){return oe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},oe(t,e)}function ae(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function se(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ce=p.a.convert({cap:!1}),ue="initial",le=l()({});function he(t,e){return 0!==t.streamType&&t.width*t.height<e.width*e.height}var de=a()(function(t){var e;return e=function(t){function e(t){var n,r,i;return ae(this,e),r=this,i=re(e).call(this,t),n=!i||"object"!==ee(i)&&"function"!=typeof i?ie(r):i,se(ie(n),"online",void 0),se(ie(n),"isReady",void 0),n.initLive=n.initLive.bind(ie(n)),n.streams=n.localTopic("streams"),n.streamActive=n.localTopic("streamActive"),n.state=n.localTopic("state").assign(se({},ue,"")),n.desc.isActivated?n.getStreamsMeta():n.setDefaultStreams(),n}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&oe(t,e)}(e,t),n=e,r=[{key:"setDefaultStreams",value:function(){var t=this.desc.videoStreams,e=Object(b.d)(t);this.streamsPromise=Promise.resolve(e),this.streamsPromise.then(this.initLive)}},{key:"getStreamsMeta",value:function(){var t=this.desc,e=t.dev,n=t.videoStreams,r=Object(y.b)(),i=r.promise,o=r.resolve;return v.a.cam("%s has %o streams",e,n.length),this.isReady=i,this.state.assign(se({},"streams",-1)),this.fetchStreamStats().then(o),this.isReady}},{key:"fetchStreamStats",value:function(){var t=this.desc.videoStreams;return this.streamsPromise=m.b(d()(c()(["accessPoint"]),t)).then(b.n),this.streamsPromise.then(this.initLive)}},{key:"initLive",value:function(t){return this.streams.put(t),this.resetLiveStream(),this.state.assign(se({},"streams",t.length)),this.desc.isActivated}},{key:"getStream",value:function(t){return le(t,this.streams.get())}},{key:"setSource",value:function(t){this.playSourceIdx=t,this.streamActive.put(t),v.a.cam("Select stream",t,this.sourceInfo)}},{key:"getStreamIdx",value:function(t){return i()(function(e){var n=e.accessPoint;return t===n})(this.streams.get())}},{key:"getStreamBy",value:function(t){return ce(function(e,n,r,i){return t(n,i[e])?r:e})(0)(this.streams.get())}},{key:"resetLiveStream",value:function(){var t=he,e=this.topic(this.topic.key.PREFS).get(),n=e.defaultStream;if(c()(n,this.streams.get()))return v.a.pref("Setting %cuser%c stream","font-weight: bold","font-weight: normal"),void this.streamActive.put(n);v.a.cam("Setting %clowest resolution%c stream","font-weight: bold","font-weight: normal"),this.streamActive.put(this.getStreamBy(t))}},{key:"stream",get:function(){var t=this.streamActive.get();return this.getStream(t)}},{key:"activeSource",get:function(){var t=this.streamActive.get();return c()([t,"accessPoint"],this.streams.get())}},{key:"isOnline",get:function(){var t=this.topic(this.topic.key.CAM_STATES).get(),e=c()(this.origin,t);return e}},{key:"dev",get:function(){return this.desc.dev}},{key:"origin",get:function(){return this.desc.origin}},{key:"id",get:function(){return this.desc.id}},{key:"name",get:function(){return this.desc.displayName}},{key:"fullname",get:function(){return"".concat(this.id," ").concat(this.name)}},{key:"isLive",get:function(){return this!==this.topic(this.topic.key.CAM_ARCH).get()}},{key:"detectors",get:function(){return this.desc.detectors}},{key:"channel",get:function(){return this.desc.channel}}],r&&ne(n.prototype,r),o&&ne(n,o),e}(t),e},function(t){var e;return e=function(t){function e(t){var n,r,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,i=q(e).call(this,t),n=!i||"object"!==H(i)&&"function"!=typeof i?W(r):i,X(W(n),"archPromise",void 0),X(W(n),"checkArchExists",function(){return n.state.assign(X({},J,-1)),Object(N.q)(n.archList.map(function(t){return m.j({vsid:t.accessPoint,archive:t.storage,limit:1}).then(function(t){var e=t.data.intervals;return e.length>0},function(){return Promise.resolve(!1)})})).then(P()(j.a)).then(T()(function(t){return n.state.assign(X({},J,t))}))}),n.archTime=n.localTopic("archTime"),n.archSelected=n.localTopic("archSelected"),n.frames=new B,n.framesReset=function(t){t.getTime()!==n.frames.current()&&(n.frames.clear(),n.archTime.unobserve(n.framesReset))},n.archive=[],n.events={},n.xhr={},n.archiveCache={},n.archHash=function(){return"".concat(n.activeSource).concat(n.archSelectedStorage)},n.fetchIntervals=new A.a(m.j,"intervals"),n.archClear=function(){n.archive=[],n.events={alerts:[],detectors:[]}},n.getIntervals=function(t){return n.fetchIntervals(t).then(V.h).then(T()(function(t){n.archive=t}))},n.getArchiveDays=function(t,e){var r=new Date(Date.UTC(t,e-1,1)),i=new Date(Date.UTC(t,e,0,23,59,59,999));return n.fetchIntervals({scale:F.b,begintime:r,endtime:i}).then(V.h).then(V.b)},n.fetchDetectors=new A.a(m.o,"detectors"),n.fetchAlerts=new A.a(m.o,"alerts"),n.getDetectors=function(t){return n.fetchDetectors(t).then(V.g).then(T()(function(t){n.events.detectors=t}))},n.getAlerts=function(t){return n.fetchAlerts(t).then(V.f).then(T()(function(t){n.events.alerts=t}))},n.currentTimestamp="",n.uuid="",n.archiveIndex=0,n.frameIndex=0,n.speed=1,n.FORWARD=1,n.BACKWARD=-1,n.stepForward=n.stepFrame.bind(W(n),n.FORWARD),n.stepBack=n.stepFrame.bind(W(n),n.BACKWARD),n.nextInterval=n.stepInterval.bind(W(n),n.FORWARD),n.prevInterval=n.stepInterval.bind(W(n),n.BACKWARD),n.archPromise=n.checkArchExists(),n}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&G(t,e)}(e,t),n=e,r=[{key:"getArchIdx",value:function(t){return i()(function(e){return C()(e,t)})(this.archList)}},{key:"updateArch",value:function(t){var e=U(t,3),n=e[0],r=e[1],i=e[2];return this.archiveIndex=n.length,this.archive=V.h(n),this.events={detectors:V.g(r),alerts:V.f(i)},Promise.all([this.archive,this.events])}},{key:"getArchEnd",value:function(){return this.fetchIntervals({begintime:"past",endtime:"future",scale:F.b,limit:1}).then(function(t){return V.e(V.h(t))})}},{key:"getArchiveContent",value:function(t,e){var n=this;v.a.deprecated();var r={begintime:t,endtime:e};return this.fetchIntervals(r).then(function(t){return Promise.all([t,n.fetchDetectors(r),n.fetchAlerts(r)])}).then(this.updateArch.bind(this))}},{key:"getArchiveList",value:function(){var t=this;v.a.deprecated();var e=this.streams.getPromise(),n=c()(["data","archives"]);return e.then(function(t){return Promise.all(t.map(function(t){var e=t.source;return m.l({vsid:e})}))}).then(function(t){return t.map(n)}).then(function(e){return t.archStreamsList.put(e),e})}},{key:"initArchive",value:function(){this.setArchSelected(this.archiveDesc)}},{key:"setArchSelectedByIdx",value:function(t){var e=c()(t,this.archList);this.setArchSelected(e)}},{key:"setArchSelectedByStorage",value:function(t){var e=O()(function(t){return a()([c()("storage"),C()(t)])}(t),this.archList);this.setArchSelected(e)}},{key:"setArchSelected",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.defaultArch,e=this.getStreamIdx(t.accessPoint);this.streamActive.put(e),this.archSelected.put(t)}},{key:"dateChange",value:function(t){this.archExist&&this.setDate(t,!0)}},{key:"getArchiveByDate",value:function(t){var e=new Date(t),n=new Date(t);return e.setHours(0,0,0,0),n.setHours(23,59,59,999),this.getArchiveContent(e,n)}},{key:"stepFrame",value:function(t){var e=this,n=this.topic(this.topic.key.ARCH_TIME).get().valueOf(),r=this.frames.step(t,n);if(r){var i=new Date(r);this.topic(this.topic.key.ARCH_TIME).put(i),this.topic(this.topic.key.PLAYBACK).assign({beginTime:i,speed:0}),this.archTime.observe(this.framesReset)}else m.k({vsid:this.activeSource,direction:t,timestamp:new Date(n),limit:10,archive:this.archSelectedStorage}).then(function(n){var r=n.data.frames;e.frames.init(r),e.stepFrame(t)})}},{key:"getIntervalIndex",value:function(t){return i()(function(e){return e.date.begin<=t&&e.date.end>=t})(this.archive)}},{key:"stepInterval",value:function(t){var e,n=this.topic(this.topic.key.ARCH_TIME).get().getTime(),r=this.getIntervalIndex(n),i=r+t,o=this.archive.length-1;if(i>=0&&i<=o)e=this.archive[i].date.begin;else switch(t){case this.FORWARD:e=this.archive[o].date.end;break;case this.BACKWARD:e=this.archive[0].date.begin}this.frames.clear(),this.topic(this.topic.key.ARCH_TIME).put(e),this.topic(this.topic.key.PLAYBACK).assign({beginTime:e,speed:0})}},{key:"archList",get:function(){return this.desc.archives}},{key:"archSelectedStorage",get:function(){return K(this.archiveDesc)}},{key:"archSelectedAccessPoint",get:function(){return Z(this.archiveDesc)}},{key:"archiveDesc",get:function(){var t=this.archSelected.get();return t}},{key:"defaultArch",get:function(){var t=this.archList,e=O()(function(t){return!t.isEmbedded}),n=e(t)||k()(t)||{};return v.a.arch("default","\narch:",n.storage,"\nstream:",n.accessPoint),n}}],r&&Y(n.prototype,r),o&&Y(n,o),e}(t),e},function(t){var e;return e=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=Rt(this,Ft(e).call(this,t)),Bt(Nt(n),"ABSOLUTE",Kt),Bt(Nt(n),"CONTINUOUS",Zt),Bt(Nt(n),"mode",{}),Bt(Nt(n),"move",lt.a),Bt(Nt(n),"zoom",lt.a),Bt(Nt(n),"areaZoom",lt.a),Bt(Nt(n),"focusAuto",lt.a),Bt(Nt(n),"pointMove",lt.a),Bt(Nt(n),"ptzPos",void 0),Bt(Nt(n),"savePosition",function(t){var e=t.data;return n.ptzPos=e,v.a.camptz("pan %o; tilt %o; zoom %o",e.pan,e.tilt,e.zoom),e}),Bt(Nt(n),"getPosition",function(){return m.x(n.tcid).then(n.savePosition)}),Bt(Nt(n),"makeMove",function(t){var e=Jt(t)?n.getPosition:it()(Xt),r=Gt(Jt(t)),i=Jt(t)?qt:j.a,o=Jt(t)?Wt:j.a;return function(a){var s=a.pan,c=void 0===s?0:s,u=a.tilt,l=void 0===u?0:u;return Promise.resolve(e()).then(function(e){var a=e.pan,s=e.tilt,u=Nt(n),h=u.tcid,d=u.ptzSpeed,f=r(d),p=i(c*f+a),b=o(l*f+s);return v.a.camptz("move ".concat(t,": pan ").concat(a," ").concat(p,", tilt ").concat(s," ").concat(b)),m.O({tcid:h,mode:t,pan:p,tilt:b,session_id:Object(N.b)(St)}).catch(te)})}}),Bt(Nt(n),"makeZoom",function(t){var e=Jt(t)?n.getPosition:it()(Xt),r=Gt(Jt(t)),i=Jt(t)?Wt:j.a;return function(o){return Promise.resolve(e()).then(function(e){var a=e.zoom,s=Nt(n),c=s.tcid,u=s.ptzSpeed,l=r(u),h=i(o*l+a);return v.a.camptz("move ".concat(t,": zoom ").concat(a," ").concat(h)),m.Q({tcid:c,mode:t,zoom:h,session_id:Object(N.b)(St)}).catch(te)})}}),n.ptzMgr=new Dt(n.tcid,n.topic),c()(["is_active"],n.ptz)?(n.ptzExist=!0,n.ptzSpeedT=n.localTopic("ptzSpeed").put(Vt),n.ptzPresets=n.localTopic("ptzPresets"),n.mode.move=Qt(n.ptz.move),n.move=n.makeMove(n.mode.move),n.mode.zoom=Qt(n.ptz.zoom),n.zoom=n.makeZoom(n.mode.zoom),n.ptz.pointMove&&(n.pointMove=n.oPointMove),n.ptz.areaZoom&&(n.areaZoom=n.oAreaZoom),n.ptz.autoFocus&&(n.focusAuto=n.oFocusAuto),v.a.camptz("move %o; zoom %o",n.ptz.move,n.ptz.zoom),Yt(n.isAbsolute)&&n.getPosition(),n):Rt(n)}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zt(t,e)}(e,t),n=e,r=[{key:"releasePtz",value:function(){this.ptzMgr.release()}},{key:"initPtz",value:function(){this.ptzMgr.init(),this.getPresets()}},{key:"getPresets",value:function(){var t=this,e=this.desc.ptzs.map(function(t){var e=t.accessPoint;return m.y(e).then(a()([c()("data"),Object(N.k)(e)])).catch(te)});return Promise.all(e).then(at.a).then(function(e){return t.presetsLastId=Math.max.apply(null,Ut(e))||1,e}).then(function(e){return t.ptzPresets.put(e)}).catch(te)}},{key:"setPreset",value:function(t){var e=t.pos,n=void 0===e?this.presetsLastId+=1:e,r=t.label,i=this.tcid;return m.P({tcid:i,pos:n,label:r,session_id:Object(N.b)(St)}).then(this.getPresets).catch(te)}},{key:"goPreset",value:function(t){var e=this.ptzPresets.get()[t].tcid;return m.C({tcid:e,pos:t,session_id:Object(N.b)(St)}).catch(te)}},{key:"removePreset",value:function(t){var e=this.ptzPresets.get()[t].tcid;return m.M({tcid:e,pos:t,session_id:Object(N.b)(St)}).then(this.getPresets).catch(te)}},{key:"oPointMove",value:function(t){var e=t.x,n=t.y,r=this.tcid;return m.J({tcid:r,x:e,y:n,session_id:Object(N.b)(St)}).catch(te)}},{key:"oAreaZoom",value:function(t){var e=t.x,n=t.y,r=t.w,i=t.h,o=this.tcid;return m.a({tcid:o,x:e,y:n,w:r,h:i,session_id:Object(N.b)(St)}).catch(te)}},{key:"oFocusAuto",value:function(){var t=this.tcid;return m.N({tcid:t,degree:"focus",session_id:Object(N.b)(St)}).catch(te)}},{key:"ptz",get:function(){return Object(b.i)(this.desc)}},{key:"tcid",get:function(){return Object(b.j)(this.desc)}},{key:"ptzSpeed",get:function(){return this.ptzSpeedT.get()},set:function(t){this.ptzSpeedT.put(Ht(t))}}],r&&$t(n.prototype,r),i&&$t(n,i),e}(t),e})(function t(e){var n=this;ae(this,t),se(this,"desc",void 0),se(this,"localTopic",void 0),v.a.cam(e),this.desc=e,this.localTopic=function(t){return n.topic("_".concat(e.channel,"::").concat(t))}});e.a=de},73:function(t,e,n){"use strict";function r(){var t,e;return{promise:new Promise(function(n,r){t=n,e=r}),resolve:t,reject:e}}function i(t){var e=this;function n(t){return t}function r(t){return"function"==typeof t?t:n}var o=n,a=n;function s(t){o=r(t)}var c=new Promise(function(e,n){t(e,n,s),a=r(n)});function u(t,e,n){var a,s=r(t),u=r(e),l=(a=n,"function"==typeof a?a:null);return new i(function(t,e,n){c.catch(l).then(s,u).then(t,e),n(o)})}c.catch(n),this.then=function(t,e){return u(t,e)},this.catch=function(t){return u(void 0,void 0,t)},this.abort=function(t){return o(t),a(t),e}}n.d(e,"b",function(){return r}),n.d(e,"a",function(){return i})},9:function(t,e,n){"use strict";var r={zoomSteps:8,zoomMin:1,zoomMax:8,hashTime:1e4,pollInterval:3e3,refreshInterval:3e4,ptzKeepaliveInterval:5e3,animationTime:250,maxScaleHeight:1e5,slideWindowMessage:!1,prefix:!1,frameWidthList:[360,480,720,960],errorThreshold:3,zoom:3,zoomScaleStep:1.2,mjpegCompression:3,previewTimeout:5e3,prefsDefault:{archFastMjpeg:!1,disconnectInactive:!0,defaultStream:-1,defaultLayout:-1,favorites:[],searchAutoScroll:!1,noKeyFrames:!1,pinned:!0,searchDefaultInterval:1e4},searchHistory:5,alertFrameWidth:320,scaleTags:[{min:-1/0,max:1e3,tags:[{step:144e5,width:20,xbase:63,lineWidth:1,color:"#000",textOut:!0,font:"500 14px Arial",textBaseline:"bottom",textColor:"#000",padding:25,format:function(t){return"".concat(4*t/this.step,":00")}},{step:72e5,width:15,xbase:63,lineWidth:1,color:"#333",textOut:!1,font:"500 14px Arial",textBaseline:"bottom",textColor:"#111",padding:25,format:function(t){return"".concat(t/this.step,":00")}},{step:18e5,width:7,xbase:63,lineWidth:1,color:"#333",textOut:!1,font:"500 14px Arial",textBaseline:"bottom",textColor:"#111",padding:25,format:function(t){return"".concat(t/this.step,":00")}}]},{min:1e3,max:2e3,tags:[{step:72e5,width:20,xbase:63,lineWidth:1,color:"#000",textOut:!0,font:"500 14px Arial",textBaseline:"bottom",textColor:"#000",padding:25,format:function(t){return"".concat(2*t/this.step,":00")}},{step:36e5,width:15,xbase:63,lineWidth:1,color:"#333",textOut:!1,font:"500 14px Arial",textBaseline:"bottom",textColor:"#111",padding:25,format:function(t){return"".concat(t/this.step,":00")}},{step:18e5,width:7,xbase:63,lineWidth:1,color:"#333",textOut:!1,font:"500 14px Arial",textBaseline:"bottom",textColor:"#111",padding:25,format:function(t){return"".concat(t/this.step,":00")}}]},{min:2e3,max:3e3,tags:[{step:36e5,width:20,xbase:63,lineWidth:1,color:"#000",textOut:!0,font:"500 14px Arial",textBaseline:"bottom",textColor:"#000",padding:25,format:function(t){return"".concat(1*t/this.step,":00")}},{step:18e5,width:15,xbase:63,lineWidth:1,color:"#333",textOut:!1,font:"500 14px Arial",textBaseline:"bottom",textColor:"#111",padding:25,format:function(t){return"".concat(t/this.step,":00")}},{step:3e5,width:7,xbase:63,lineWidth:1,color:"#333",textOut:!1,font:"500 14px Arial",textBaseline:"bottom",textColor:"#111",padding:25,format:function(t){return"".concat(t/this.step,":00")}}]},{min:3e3,max:7e3,tags:[{step:36e5,width:20,xbase:63,lineWidth:1,color:"#000",textOut:!0,font:"500 14px Arial",textBaseline:"bottom",textColor:"#000",padding:25,format:function(t){return"".concat(1*t/this.step,":00")}},{step:18e5,width:15,xbase:63,lineWidth:1,color:"#333",textOut:!0,font:"500 14px Arial",textBaseline:"bottom",textColor:"#000",padding:25,format:function(t){return"".concat(Math.floor(.5*t/this.step),":30")}},{step:3e5,width:7,xbase:63,lineWidth:1,color:"#333",textOut:!1,font:"500 12px Arial",textBaseline:"bottom",textColor:"#111",padding:10,format:function(t){var e=.5*t/18e5,n=Math.floor(.5*t/18e5),r=Math.round(60*(e-n));return"".concat(n,":").concat(r)}}]},{min:7e3,max:1/0,tags:[{step:36e5,width:20,xbase:63,lineWidth:1,color:"#000",textOut:!0,font:"500 14px Arial",textBaseline:"bottom",textColor:"#000",padding:25,format:function(t){return"".concat(1*t/this.step,":00")}},{step:18e5,width:15,xbase:63,lineWidth:1,color:"#333",textOut:!0,font:"500 14px Arial",textBaseline:"bottom",textColor:"#000",padding:25,format:function(t){return"".concat(Math.floor(.5*t/this.step),":30")}},{step:3e5,width:7,xbase:63,lineWidth:1,color:"#333",textOut:!0,font:"500 12px Arial",textBaseline:"bottom",textColor:"#111",padding:10,format:function(t){var e=.5*t/18e5,n=Math.floor(.5*t/18e5),r=Math.round(60*(e-n));return r<10&&(r="0".concat(r)),"".concat(n,":").concat(r)}},{step:6e4,width:3,xbase:63,lineWidth:1,color:"#333",textOut:!1,font:"500 12px Arial",textBaseline:"bottom",textColor:"#111",padding:10,format:function(){}}]}],searchFaces:{redSquareMargin:.05},playspeed:[-8,-4,-3,-2,-1,1,2,3,4,8]};r.zoomDelta=Math.pow(r.zoomMax,1/r.zoomSteps)-1;var i=r,o={locale:{},settings:i,scale:0,lastDate:{}};e.a=o},93:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o}),n.d(e,"c",function(){return a});var r=n(134),i=new Intl.Collator(r.b,{sensitivity:"base"}).compare,o=function(t,e){return Math.sign(t-e)};function a(t,e,n){var r=n.slice();return Array.prototype.sort.call(r,function(n,r){for(var i=0,o=0;o<e.length&&0===i;o+=1){var a=t[o];i=e[o](n[a],r[a])}return i})}},95:function(t,e,n){"use strict";n.d(e,"b",function(){return b}),n.d(e,"a",function(){return y}),n.d(e,"c",function(){return g});n(139);var r=n(160),i=n.n(r),o=n(7),a=n.n(o),s=n(3),c=n.n(s),u=n(32),l=n.n(u),h=n(6),d=n.n(h),f=n(286),p=n.n(f),m=n(287),v=n.n(m);function b(t){for(var e=[],n=t,r=0;r<4;r+=1)e.push(String.fromCharCode(255&n)),n>>=8;return e.join("")}var y=function(t){return/DeviceIpint/.test(t)},g=d()([i()(","),a()(p.a),l()(v.a)]);d()([JSON.parse,c()("objects"),l()(function(t){var e=t.name;return e.includes("DeviceIpint")})])}});